<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <!-- turn this into html5 -->
    <head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app103.us.archive.org';v.server_ms=295;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="/_static/js/playback.bundle.js?v=R56vIgLu" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
<script type="text/javascript">
if (window._WBWombatInit) {
  wbinfo = {}
  wbinfo.url = "https://www.uncarved.com/articles/hammerspoon";
  wbinfo.timestamp = "20180301034156";
  wbinfo.request_ts = "20180301034156";
  wbinfo.prefix = "https://web.archive.org/web/";
  wbinfo.mod = "if_";
  wbinfo.is_framed = false;
  wbinfo.is_live = false;
  wbinfo.coll = "web";
  wbinfo.proxy_magic = "";
  wbinfo.static_prefix = "/_static/";
  wbinfo.enable_auto_fetch = true;
  wbinfo.auto_fetch_worker_prefix = "https://web.archive.org/web/";
  wbinfo.wombat_ts = "20180301034156";
  wbinfo.wombat_sec = "1519875716";
  wbinfo.wombat_scheme = "https";
  wbinfo.wombat_host = "www.uncarved.com";
  wbinfo.ignore_prefixes = ["/__wb/",
                            "/_static/",
                            "/web/",
                            "http://analytics.archive.org/",
                            "https://analytics.archive.org/",
                            "//analytics.archive.org/",
                            "http://archive.org/",
                            "https://archive.org/",
                            "//archive.org/",
                            "http://faq.web.archive.org/",
                            "http://web.archive.org/",
                            "https://web.archive.org/"
                            ];
  wbinfo.wombat_opts = {};
  window._WBWombatInit(wbinfo);
}
__wm.init("https://web.archive.org/web");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=_99BHQfY" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->

        <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
        <meta name="Author" content="Sean Hunter"/>
        <meta name="MSSmartTagsPreventParsing" content="TRUE"/>
        
        <meta name="description" content="The quest to get a mac to do exactly what I want"/>
        
        <link rel="stylesheet" type="text/css" href="/web/20180301034156cs_/https://www.uncarved.com/static/minstyle.css"> 
        <title>The Uncarved Blog: Hammerspoon - nerd customization to the macs</title>
		<script type="application/ld+json">
		{
		  "@context": "https://web.archive.org/web/20180301034156/http://schema.org",
		  "@type": "NewsArticle",
		  "mainEntityOfPage": {
			"@type": "WebPage",
			"@id": "https://web.archive.org/web/20180301034156/https://www.uncarved.com/articles/hammerspoon"
		  },
		  "headline": "Hammerspoon - nerd customization to the macs",
		  "datePublished": "2017-06-23T07:29:12Z",
		  "dateModified": "2017-06-23T07:29:12Z",
		  "author": {
			"@type": "Person",
			"name": "Sean Hunter"
		  }
           , "description": "The quest to get a mac to do exactly what I want" 
		}
        </script>
        <meta property="og:title" content="Hammerspoon - nerd customization to the macs"/>
        <meta property="og:type" content="article"/>
        <meta property="og:url" content="https://web.archive.org/web/20180301034156/https://www.uncarved.com/articles/hammerspoon"/>
        <meta property="og:image" content="https://web.archive.org/web/20180301034156im_/https://www.uncarved.com/static/images/iching/Iching-hexagram-22.png"/>
        <meta property="og:image:width" content="200"/>
        <meta property="og:image:height" content="200"/>
        <meta property="og:image" content="https://web.archive.org/web/20180301034156im_/https://www.uncarved.com/static/images/iching/Iching-hexagram-02.png"/>
        <meta property="og:image:width" content="200"/>
        <meta property="og:image:height" content="200"/>
        <meta property="og:description" content="The quest to get a mac to do exactly what I want"/> 
	</head>

	<body>
		<div id="left_menu">
			<ul>
                <li><a href="/web/20180301034156/https://www.uncarved.com/articles/hammerspoon">permalink</a></li>
                <li><a href="/web/20180301034156/https://www.uncarved.com/">top</a></li>
			</ul>
		</div>
		<div class="body">
            
			<h2>
                Hammerspoon - nerd customization to the macs
			</h2>
            

            
            <div class="precis">The quest to get a mac to do exactly what I want</div>
            

            <p>It all started because I use a weird keyboard.  When I don't have this keyboard
plugged in, I want my laptop keyboard map to use dvorak, but since my keyboard
is dvorak in hardware, when it's plugged in, the laptop's keyboard map needs to
be switched to qwerty otherwise I get a kind of "double dvorak" and everything
goes down an extremely strange rabbit hole.  Now normally it wouldn't be that
much of a hassle to just change it when I'm plugging or unplugging my keyboard,
but I found myself in a situation when I kept having to take my laptop to one
or other meeting, meaning that I would be plugging and unplugging the keyboard
and flipping the setting multiple times a day.</p>
<p>As a nerd, this grates.  The computer should just know that if I have that keyboard plugged in I want the keyboard mapping to be qwerty and otherwise I want it to be dvorak.  Happily, this is where <a href="https://web.archive.org/web/20180301034156/http://www.hammerspoon.org/" title="A cool customization framework for Macs">hammerspoon</a> comes in.  Hammerspoon is a framework that allows you to program all kinds of little customizations for mac.  Here's how you do the keyboard tweak I wanted:</p>
<pre><code>-- Watch for planck keyboard add/remove and set the keyboard layout appropriately
function usbDeviceCallback(data)
    -- Skip internal memory card as it spams an event on suspend/resume
    if (data["productName"] ~= "Internal Memory Card Reader") then
        hs.alert(data["productName"] .. " " .. data["eventType"])
    end

    if (data["productName"] == "Planck") then
        if (data["eventType"] == "added") then
            --when we add the planck, change the hardware layout to dvorak and turn the OS key 
            --layout to qwerty
            hs.keycodes.setLayout("U.S.")
        elseif (data["eventType"] == "removed") then
            --when we remove the planck, change the hardware layout to qwerty.  It's up to the 
            --OS to give me dvorak
            hs.keycodes.setLayout("Dvorak")
        end
    end
end
usbWatcher = hs.usb.watcher.new(usbDeviceCallback)
usbWatcher:start()
</code></pre>
<p>...but of course this turned out to be a gateway drug for all kinds of further customizations.  How about a thing that starts the annoying WeWork printer client thing whenever I'm at WeWork?  (Yup.  Done).  Automatically tweaks my brightness taking into account my battery percentage and the ambient brightness of the room I'm in?  (Yup.  Easy peasy).  Set a default layout of windows whenever I plug my laptop into an external monitor?  (Sure) I've now also got it so I can do almost all window movement and resizing via the keyboard.</p>
<p>Any case, my full config is <a href="/web/20180301034156/https://www.uncarved.com/static/init.lua.txt">here</a>.  Feel free to take from it anything that's usable.  The grid resizing thing has a minor bug that I've not been annoyed enough to fix yet, where on certain sizes of monitor it doesn't realise your window is on at the bottom, so you need to move it up to resize.  Other than that it's tickety-boo.  I highly recommend checking hammerspoon out if you can code a little and want to tweak a Mac to behave exactly the way you want.</p>
		<hr/>
        <p class="footer">
        
        <span class="tags">Tags:
            
            <a href="/web/20180301034156/https://www.uncarved.com/tags/computers">computers</a>
            
        </span>
        
        Last modified: 2017-06-23T07:29:12Z</p>
        <p class="tagline">Unless otherwise specified the contents of this page are copyright &copy; 2015 <a href="https://web.archive.org/web/20180301034156/mailto:sean@uncarved.com">Sean Hunter</a>.  This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International <a rel="license" href="https://web.archive.org/web/20180301034156/http://creativecommons.org/licenses/by-sa/4.0/">License</a>.
        <!-- figure out metadata -->
	</p>
		</div>
    </body>
</html><!--
     FILE ARCHIVED ON 03:41:56 Mar 01, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 06:49:49 Jul 30, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  RedisCDXSource: 17.814
  exclusion.robots.policy: 0.218
  CDXLines.iter: 25.373 (3)
  load_resource: 179.753
  captures_list: 107.995
  esindex: 0.019
  exclusion.robots: 0.232
  LoadShardBlock: 59.918 (3)
  PetaboxLoader3.resolve: 107.443
  PetaboxLoader3.datanode: 62.77 (4)
-->