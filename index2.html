<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head><title>The Uncarved Block</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><link rel="canonical" href="http://archive.today/uiYDs"/></head><body style="margin:0;background-color:white;width:1024px"><div class="html1" style="width: 1024px;text-align: left;overflow-x: auto;overflow-y: auto; background-color: rgb(255, 255, 255);position: relative;min-height: 61359px;; z-index: 0"><div class="html" style="text-align:left;overflow-x:visible;overflow-y:visible;">










<meta name="description" content="Sean Hunter's personal blog, containing software, haskell, scala, ocaml, unix tips and sundry other things."/>



<div class="body" style="vertical-align:bottom;min-height:61330px;text-align:left;color:black;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;overflow-x:visible;overflow-y:visible;margin: 8px; ">
<div style="text-align:left;height:auto;padding-bottom:2ex;">
<a href="http://archive.today/o/uiYDs/www.akirarabelais.com/i/i.html%2328" style="text-align:left;" target="_blank"><img alt="28: Ta Kuo -  Preponderance of the Great" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAAAAABURb1YAAAAAnRSTlMA/1uRIrUAAAACYktHRAAAqo0jMgAAAAlwSFlzAAALEAAACxABrSO9dQAAAE1JREFUWMPt2DEKADAIBMH4/0ebD5giIJLAXKtsddtc5OpItGGiPNT40y/MBOat3sDcOnWThBnBaDGnYDjFKS3mFAynOKXFNgqY7zeKDQRhdgH90yjuAAAAAElFTkSuQmCC" title="28: Ta Kuo -  Preponderance of the Great" style="text-align:left;clear:none;float:left;vertical-align:top;border-width: 0px; border-style: none; border-color: white; "/></a>
<a href="http://archive.today/o/uiYDs/www.akirarabelais.com/i/i.html%2316" style="text-align:left;" target="_blank"><img alt="16: Yu -  Enthusiasm" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAAAAABURb1YAAAAAnRSTlMA/1uRIrUAAAACYktHRAAAqo0jMgAAAAlwSFlzAAALEAAACxABrSO9dQAAAExJREFUWMPt1bENADAIA8Gw/9DJAqSIhCDFuQV95Zdjr4pEGSbSQ46//cJ0YP7qDQynOEWGWadesmFaMFpsp2DsFKe0mFMwnOLUQG8Oh4CIAZuDxKQAAAAASUVORK5CYII=" title="16: Yu -  Enthusiasm" style="text-align:left;clear:none;float:right;vertical-align:top;border-width: 0px; border-style: none; border-color: white; "/></a>
<h1 style="clear:none;vertical-align:middle;text-align:center;">The Uncarved Block</h1>
</div>
<div style="position:relative;float:left;clear:none;left:0px;width:10%;height:313px;line-height:1.2em;text-align:right;font-size:0.8em;padding: 1.5em 0.5em 0.5em; ">
<ul style="margin-left:0px;padding-left:0px;margin-right:0px;padding-right:0px;padding-bottom:4ex;">
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">top</a></li>

</ul>
<ul style="margin-left:0px;padding-left:0px;margin-right:0px;padding-right:0px;padding-bottom:4ex;">
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" title="This tag contains software in Haskell, Scala, ocaml etc, unix tips and other computer-related stuff." style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">/computers</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/reviews" title="An occasional series of reviews of books and other things which interest me." style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">/reviews</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/thoughts" title="Here we have essays and articles and random thoughts amusing to me, primarily on non-computing topics.  Enjoy!" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">/thoughts</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/everything%20else" title="This is a general grab bag of stuff which doesn't fit in other categories." style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">/everything else</a></li>
</ul>
<ul style="margin-left:0px;padding-left:0px;margin-right:0px;padding-right:0px;padding-bottom:4ex;">
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/free_software" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">free software</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/why_uncarved" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">why "uncarved"?</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/credits" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">credits</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/contact" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">contact me</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/biog" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">about me</a></li>
</ul>
<ul style="margin-left:0px;padding-left:0px;margin-right:0px;padding-right:0px;padding-bottom:4ex;">
<li style="list-style-type:none;">
feeds: <a href="http://archive.today/o/uiYDs/www.uncarved.com/feeds/atom/" type="application/atom+xml" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">atom</a>
<a href="http://archive.today/o/uiYDs/www.uncarved.com/feeds/json/" type="application/json" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">json</a></li>
<li style="list-style-type:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/login/" style="text-decoration:none;color:rgb(136, 136, 136);background-color: inherit; " target="_blank">Not logged in</a></li>
</ul>
</div>
<div style="text-align:left;position:relative;clear:none;top:0px;height:61251px;margin-left:10%;margin-right:10%;padding-left:1em;padding-right:1em;">
<div style="margin-top:12px;margin-bottom:12px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;margin-left:20px;text-align:justify;clear:none;font-size:0.8em;">
[Last update: 2011-06-02T18:18:09Z] [59 articles in total] </div>
<div style="text-align:left;">
<div title="Getting started with github" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/helpers_github" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Getting started with github</a></h2>
<div style="text-align:left;font-style:italic;">Before we can do our marketmaking system, you need to be able to get the software.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">To share the marketmaking software that I talked about in the
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/mm_1.mrk" title="The first article in my electronic marketmaking series" target="_blank">first marketmaking article</a>, we need to have a repository set up, so I decided to get going with
<a href="http://archive.today/o/uiYDs/github.com/" title="Github - a public git repository" target="_blank">github</a>. You'll need to
<a href="http://archive.today/o/uiYDs/help.github.com/set-up-git-redirect" title="Instructions to set up the git version control system" target="_blank">set up git</a>, and you'll need
<a href="http://archive.today/o/uiYDs/maven.apache.org/" target="_blank">maven 2</a>
to build everything. I thought I'd put out a small article to get people started with building a small package we're going to depend on for the bigger system. Assuming this goes ok, I'll push the actual software that interfaces with bullionvault.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Once you've got git and maven2 set up, it should be simple enough. On my linux boxes I just do:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">git clone git://github.com/huntse/helpers.git
cd helpers
mvn test
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and with any luck, git will get the software, maven2 will download the internet and some time later build and run the tests, and you'll see something like this:
</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]
[INFO] --- maven-scalatest-plugin:1.1-SNAPSHOT:test (default) @ helpers ---
[INFO] org.scalatest.tools.Runner.run(-p, "/home/sean/tmp/helpers/target/classes /home/sean/tmp/helpers/target/test-classes", -o, -fNCXEHLOWFD, /home/sean/tmp/helpers/target/scalatest-reports/file/constrained.txt, -f, /home/sean/tmp/helpers/target/scalatest-reports/file/full.txt, -u, /home/sean/tmp/helpers/target/scalatest-reports/xml, -h, /home/sean/tmp/helpers/target/scalatest-reports/html/report.html)
Run starting. Expected test count is: 7
Suite Starting - DiscoverySuite
BasicClientSpec:
An BasicClient object
- should be able to get theflautadors.org
- should be able to reget theflautadors.org using conditional get
- should be able to get HEAD of uncarved.com
- should be able to GET uncarved with parameters
- should be able to get xml
- should be able to handle redirects
- should be able to do a POST with values
Suite Completed - DiscoverySuite
Run completed in 2 seconds, 266 milliseconds.
Total number of tests run: 7
Suites: completed 2, aborted 0
Tests: succeeded 7, failed 0, ignored 0, pending 0
All tests passed.
THAT'S ALL FOLKS!
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 23.140s
[INFO] Finished at: Wed Jun 01 10:27:36 GMT 2011
[INFO] Final Memory: 6M/11M
[INFO] ------------------------------------------------------------------------
mvn test  22.79s user 0.74s system 94% cpu 24.793 total
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I don't use eclipse or anything like that, but it should be possible too get this working with eclipse too, just don't ask me how.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/helpers_github" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2011-06-02T18:18:09Z</div>
</div>
<div title="Writing an Automated Marketmaking System" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/mm_1" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Writing an Automated Marketmaking System</a></h2>
<div style="text-align:left;font-style:italic;">The first in a series of articles in which we will construct a simple high frequency trading system.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">There has been a lot of press recently about the evils of high frequency trading (HFT), with many commentators saying that HFT may well be the root of the next big financial crisis. The basis for this view is the increasing importance of computerised market-making systems in providing liquidity to markets, and the concern about what happens if these participants stop providing this liquidity in the event of some sort of market panic. Additionally, some commentators maintain that automated market makers are trading in a manner that is to the detriment of other participants.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Rather than attempting to add more commentary to this debate, I'd like to contribute in a practical way by widening the understanding of these systems so that people can decide for themselves. As such, this is going to be the first in a series of articles during which we will build a fully-functional electronic market-making system. It's going to take a little while to develop all the pieces, but since I have the first piece almost ready to go I think it's time I came out with the introductory articles. This series will mostly be aimed at people with some computing background and interest in financial markets but not assume any knowledge of how markets work.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Caveats before we begin</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Nothing in these articles is going to constitute any sort of advice as to the merits of investing in a particular product, or making markets using a particular strategy. If you follow the series you will acquire some bits of software which can be used to construct an EMM (Electronic Market-Making) system. I won't make you pay for them, and if you use them, you may lose money. The software may have bugs or unintended features which cause you to lose money. I'm really sorry if that's the case. You need to understand the software and accept the consequences of what it does, because it will be trading on your account. You need to put in place any tests you require to feel happy that it is performing according to your specifications. You also need to understand that in financial markets you are dealing with random processes and as such even well-founded strategies can lead to losses. Additionally, anything you make using this toolkit will need to be able to hold it's own against other market participants who will be aiming to exploit it. In any financial situation you need to do your own research and take responsibility for what happens - this is no different. Obviously you shouldn't put more at risk than you can afford to lose, but it's your money, and you need to decide whether this is right for you.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Background - Marketmakers and liquidity</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">It would be very cumbersome if every time you wanted to buy something you had to find the person willing to sell exactly that quantity at that time and agree a price, so generally when we buy or sell, a
<a href="http://archive.today/o/uiYDs/www.investopedia.com/terms/m/marketmaker.asp" title="Another definition of a marketmaker." target="_blank">marketmaker</a>
actually takes the other side of the trade, hoping to find someone else wanting the opposite bargain later in the day. The marketmaker makes money by charging a small spread (ie they buy for lower than they sell for) in return for assuming the risk of holding the position you have put them into until they are able to unwind it by doing the opposite trade. This risk is a function of the ease of the unwind (how likely they are to be able to find someone to trade with) and the <a href="http://archive.today/o/uiYDs/www.investopedia.com/terms/v/volatility.asp" title="What is volatility?" target="_blank">price volatility</a>
of the asset. So if you want to trade in a product which has very low price volatility, and very high <a href="http://archive.today/o/uiYDs/www.investopedia.com/terms/l/liquidity.asp" title="What is meant by liquidity?" target="_blank">liquidity</a>, then it would be easy for the marketmaker to find someone to trade out of their position with, and they would not need to worry about the price moving too much while they hold the asset, so you would expect the spread between the bid and ask prices to be very low. Conversely, high volatility and low liquidity assets would normally have high spreads to compensate marketmakers for their higher risk.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Providing liquidity</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In the old days, the position of marketmaker was held only by exchange locals who had to pay for the membership that allowed them to earn this spread, but with the advent of
<a href="http://archive.today/o/uiYDs/www.investopedia.com/terms/l/limitorderbook.asp" title="What is a limit order book?" target="_blank">limit order books</a>, anyone can provide liquidity to many markets and expect to be compensated for it. Our goal is to write a computer system which will do this for us. In order to do that, we first need to understand how a limit order book works, and by way of an example I'm going to jump right in and introduce the market we will use as the basis for this whole series.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Bullionvault</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The market we're going to use for our examples is
<a href="http://archive.today/o/uiYDs/www.bullionvault.com/%23HUNTSE" title="Bullionvault.com - an online gold market that encourages automated market making" target="_blank">bullionvault.com</a>, which is in essence a physical gold and silver market, with all the actual metal held in escrow in reserves in New York, London and Zurich, with seperate order books in $, £ and €. If you sign up using that link I will make a small referral fee (at no cost to you) from the commissions you pay to trade your account, and that's I'm going to get for writing these articles. Before you sign up, you should of course, peruse the
<a href="http://archive.today/o/uiYDs/www.bullionvault.com/help/index.do" title="Bullionvault on-line help" target="_blank">on-line help</a>
so you understand how their system works, and like any other investment, you should think carefully about the risks involved.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Understanding the order book</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">If you go to the
<a href="http://archive.today/o/uiYDs/www.bullionvault.com/%23HUNTSE" title="Bullionvault.com - an online gold market that encourages automated market making" target="_blank">front page</a>, you can see the current
<em>sell</em>
and <em>buy</em>
prices for gold in the three locations in one currency (USD by default).</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;"><img alt="Bullionvault USD gold touch prices" src="369c331c58cde6c08e715d4a409cfdbf92557513.jpg"/></div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">The touch</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">These prices are just the top of the order book - the so-called
<em>touch</em>
prices. You would find more quantity available at different prices to buy or sell further away in the book, but what the prices mean in this example is that if you wanted to buy one troy ounce of gold in NYC it would cost you $1528, but if you wanted to sell you would only get $1524, so the market spread is $4 per TOz or $110 per kg if you live in the modern world. We're going to use metric units for these articles as teaching something as amazing as a modern computer to think in Troy ounces (or any imperial units) is a great evil, like teaching children arithmetic only by using Roman numerals or something.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Bid and Offer</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">We're also going to use some real market-making terminology, so we're going to refer to
<em>bid and ask</em>
or <em>bid and offer</em>
prices, rather than <em>sell and buy</em>
prices. The easy way to remember which way round these are is to think about the fact that as marketmakers we want to make money and so charge people for what they want to do. If they want to sell, we're going to <em>bid</em>
to buy those shares from them at a low price. If they want to sell, we will reluctantly <em>offer</em>
to sell to them at a high price. Hence bid is low and offer is high. When these prices are reversed, the orderbook is said to be <em>crossed</em>. This happens in equity markets when they are closed for the night, there is then an auction phase where high bids are matched with low offers until the book is uncrossed and normal trading begins. We wouldn't expect the orderbook to be crossed in a continuous trading market like this unless something was wrong and matching was suspended.</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Aggressive and Passive</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">If an order to buy comes in, and it has no limit price, it is matched with the cheapest available sell orders until it is filled. If it has a limit price, it will only be filled up to the limit price on the order. But what happens to the remaining quantity? Under normal circumstances, this quantity stays on the book at the limit price until it can be matched against an incoming sell order within its limit.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">We say that an order that provides liquidity by sitting on the book waiting to be filled is
<em>passive</em>
and that an order which crosses the spread, taking liquidity from the market by crossing off with passive orders is <em>aggressive</em>. We can also refer to the
<em>passive touch</em>
and <em>aggressive touch</em>. If we have an order to buy, then the
<em>passive touch</em>
is the bid and the <em>aggressive touch</em>
is the offer. This is because if we want to buy passively, we will place our order at the bid or lower, whereas if we want to buy aggressively, we will need to pay the offer or higher. The opposite would be true for a sell order. If we want to sell right now, we will need our limit price to be at, or more aggressive (lower) than, the current bid, whereas if we are prepared to wait, our price can be more passive (ie higher).</div>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Still to come - the software</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In the next article, I will introduce a the software we can use to connect to bullionvault. Please feel free to comment below if anything so far is unclear and I'll try to deal with it in the next article.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/mm_1" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2011-05-11T09:59:07Z</div>
</div>
<div title="Bullionvault interface" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/bvapi_intro" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Bullionvault interface</a></h2>
<div style="text-align:left;font-style:italic;">Wrapping the public interface of a gold market in scala goodness</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/bvapi_intro" target="_blank">permalink</a>
Last updated: 2011-05-02T07:19:27Z</div>
</div>
<div title="Mozilla Ubiquity" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ubiquity" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Mozilla Ubiquity</a></h2>
<div style="text-align:left;font-style:italic;">Fun with this amazing mozilla addon</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;"><a href="http://archive.today/o/uiYDs/https://addons.mozilla.org/en-US/firefox/addon/9527" title="The Mozilla Ubiquity addon" target="_blank">Ubiquity</a>
is an amazing mozilla addon which gives users a command-line interface within the browser which you can use to do various things. Users can easily write their own commands in javascript and share them via the web. In that spirit, I've written my first ubiquity command, which searches hoogle, the haskell type-aware search engine.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">CmdUtils.makeSearchCommand({
  homepage: "http://www.uncarved.com/",
  author: { name: "Sean Hunter"},
  license: "MPL",
  name: "hoogle-search",
  url: "http://www.haskell.org/hoogle/?hoogle={QUERY}",
  icon: "http://www.haskell.org/favicon.ico",
  description: "Searches haskell.org for functions matching by name or type signature.",
});
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">As you can see, it's virtually all meta-data and that's because there are a bunch of functions around search that know how to do everything you need to do. However, you can write more sophisticated commands that manipulate the browser, the web page you're on, have little built-in previews etc. All very nifty.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">When you have the above, you can simply invoke ubiquity and say "<code style="font-size:85%;">hoogle-search Ord a =&#62; a -&#62; a</code>" or whatever and it will find you functions matching that type signature. I'll share this command (and any others I write) at
<a href="http://archive.today/o/uiYDs/www.uncarved.com/" title="the uncarved block" target="_blank">www.uncarved.com</a>
using the subscription mechanism they recommend.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I was feeling rather proud of the above, however I saw this morning that if you go on a page with a search box, select it and invoke ubiquity and type "<code style="font-size:85%;">create-new-search-command</code>" it writes something very much like the above for you.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ubiquity" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2010-05-05T04:46:34Z</div>
</div>
<div title="Haskell arrays are amazing" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/haskell_arrays" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Haskell arrays are amazing</a></h2>
<div style="text-align:left;font-style:italic;">Functional languages are all about lists... but Haskell has incredible arrays</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">For certain classes of problems where speed is of the essence, table lookups can be a fantastic solution. However, many functional programmers eschew these approaches partly because they are thinking in terms of lists, and lookups in lists (as we all know) are a bit rubbish most of the time. However, Haskell has a fantastic array implementation that is flexible enough to put many imperative languages to shame (especially when combined with list comprehensions). Hopefully an example will illustrate what I mean. The actual array lookup I'm doing is into arrays of much larger size, but the principle is exactly the same.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Say you want to model a regular deck of 52 playing cards and want to write functions to convert them to and from integers. We want to proceed by rank (two to ace), then for each rank, by suit (clubs, diamonds, hearts, spades) so the two of clubs is going to be 0, the two of spades is going to be 3 and the ace of spades is going to be 51.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Let's start by defining the datatypes for Rank and Suit and a simple generic card type:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">data Rank =
    Two
    | Three
    | Four
    | Five
    | Six
    | Seven
    | Eight
    | Nine
    | Ten
    | Jack
    | Queen
    | King
    | Ace
    deriving (Eq, Ord, Show, Read, Enum, Ix)

data Suit =
    Clubs
    | Diamonds
    | Hearts
    | Spades
    deriving (Eq, Ord, Show, Read, Enum, Ix)

data GenCard = GenCard Rank Suit
    deriving (Eq, Ord, Show, Read)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...so far so not very interesting. Now the two functions we want to define are:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardOfInt :: Int -&#62; GenCard
genCardToInt :: GenCard -&#62; Int
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and obviously, you could do:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardOfInt 0 = GenCard Two Clubs
genCardOfInt 1 = GenCard Two Diamonds
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...etc all the way to...</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardOfInt 51 = GenCard Ace Spades
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and then...</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardToInt (GenCard Two Clubs) = 0
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and so on.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This would work, but it is extremely smelly. The thing that alerts us to the fact that this is fishy is that there is a lot of repetitive typing. The gods of Haskell frown on this and generally if you're doing a bunch of it, there's probably something wrong. And indeed there is. This approach leads to a linear search through cases every time until we find a match. If we care about performance, this will be horrible and imagine how bad it will get if we get a table with (say) 4 million entries? The actual problem I am interested in requires this size of table. Happily we can use an array-driven method to not only speed up our algorithm, but also to scrap all this tedious repitition. First, some background.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">For genCardOfInt what we want to do is create an array of 52 cards and then use the int passed in to look up into this array. This will give us constant time access. So what we want is:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardOfInt x = lookup ! x
    where
        lookup = .... to be discussed
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">One possible solution is to do</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">        lookup = listArray (0,51) [GenCard Two Clubs, GenCard Two Diamonds etc etc etc]
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">... but that's almost as unhaskelly as what we had before! So, here's how we do it.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardOfInt x = lookup ! x
    where
        lookup = listArray (0,51) [GenCard r s|r&#60;-enumFrom Two, s&#60;-enumFrom Clubs]
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Say whaaaa? Well, let's see what ghci has to say:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">*Card&#62; enumFrom Two
[Two,Three,Four,Five,Six,Seven,Eight,Nine,Ten,Jack,Queen,King,Ace]
*Card&#62; enumFrom Clubs
[Clubs,Diamonds,Hearts,Spades]
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So because we said "deriving Enum" for our types, we get this ability for free. Mighty 'andy.
</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">*Card&#62; [GenCard r s|r&#60;-enumFrom Two, s&#60;-enumFrom Clubs]
[GenCard Two Clubs,GenCard Two Diamonds,GenCard Two Hearts,GenCard Two Spades,GenCard Three Clubs,GenCard Three Diamonds,GenCard Three Hearts,GenCard Three Spades,GenCard Four Clubs,GenCard Four Diamonds,GenCard Four Hearts,GenCard Four Spades,GenCard Five Clubs,GenCard Five Diamonds,GenCard Five Hearts,GenCard Five Spades,GenCard Six Clubs,GenCard Six Diamonds,GenCard Six Hearts,GenCard Six Spades,GenCard Seven Clubs,GenCard Seven Diamonds,GenCard Seven Hearts,GenCard Seven Spades,GenCard Eight Clubs,GenCard Eight Diamonds,GenCard Eight Hearts,GenCard Eight Spades,GenCard Nine Clubs,GenCard Nine Diamonds,GenCard Nine Hearts,GenCard Nine Spades,GenCard Ten Clubs,GenCard Ten Diamonds,GenCard Ten Hearts,GenCard Ten Spades,GenCard Jack Clubs,GenCard Jack Diamonds,GenCard Jack Hearts,GenCard Jack Spades,GenCard Queen Clubs,GenCard Queen Diamonds,GenCard Queen Hearts,GenCard Queen Spades,GenCard King Clubs,GenCard King Diamonds,GenCard King Hearts,GenCard King Spades,GenCard Ace Clubs,GenCard Ace Diamonds,GenCard Ace Hearts,GenCard Ace Spades]
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So that bit is a
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/List_comprehension" title="List comprehensions in the wikipedia.  No 'List Comprehensions in Popular Culture' section, sadly." target="_blank">list comprehension</a>. Basically it's a simple way of defining a list and avoids all the tedium and boilerplate. And "listArray" takes some dimensions and a list and returns an array. But the best is yet to come, and ghci hints at it now:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">*Card&#62; :t listArray (0,51) [GenCard r s|r&#60;-enumFrom Two, s&#60;-enumFrom Clubs]
listArray (0,51) [GenCard r s|r&#60;-enumFrom Two, s&#60;-enumFrom Clubs]
  :: (Num t, Ix t) =&#62; Array t GenCard
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So the type of that "lookup" variable is an Array t GenCard. The "t" is some numeric type that we can use to index into our array, and the GenCards (as we know) are what's in the array. So the type of the array index is polymorphic.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This means we can do:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">genCardToInt :: GenCard -&#62; Int
genCardToInt (GenCard r s) = lookup ! (r,s)
    where
        lookup = listArray ((Two,Clubs),(Ace,Spades)) [x|x&#60;-[0..51]]
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Gosh! Let's try that expression in ghci:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">*Card&#62;  listArray ((Two,Clubs),(Ace,Spades)) [x|x&#60;-[0..51]]
array ((Two,Clubs),(Ace,Spades)) [((Two,Clubs),0),((Two,Diamonds),1),((Two,Hearts),2),((Two,Spades),3),((Three,Clubs),4),((Three,Diamonds),5),((Three,Hearts),6),((Three,Spades),7),((Four,Clubs),8),((Four,Diamonds),9),((Four,Hearts),10),((Four,Spades),11),((Five,Clubs),12),((Five,Diamonds),13),((Five,Hearts),14),((Five,Spades),15),((Six,Clubs),16),((Six,Diamonds),17),((Six,Hearts),18),((Six,Spades),19),((Seven,Clubs),20),((Seven,Diamonds),21),((Seven,Hearts),22),((Seven,Spades),23),((Eight,Clubs),24),((Eight,Diamonds),25),((Eight,Hearts),26),((Eight,Spades),27),((Nine,Clubs),28),((Nine,Diamonds),29),((Nine,Hearts),30),((Nine,Spades),31),((Ten,Clubs),32),((Ten,Diamonds),33),((Ten,Hearts),34),((Ten,Spades),35),((Jack,Clubs),36),((Jack,Diamonds),37),((Jack,Hearts),38),((Jack,Spades),39),((Queen,Clubs),40),((Queen,Diamonds),41),((Queen,Hearts),42),((Queen,Spades),43),((King,Clubs),44),((King,Diamonds),45),((King,Hearts),46),((King,Spades),47),((Ace,Clubs),48),((Ace,Diamonds),49),((Ace,Hearts),50),((Ace,Spades),51)]
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So we have an array which is indexed by a pair of (Rank, Suit), and the values are numbers from 0 to 51. And no boilerplate. If we wanted to test this, of course, we could write some quickcheck properties that verify this implementation against the naive one I gave before. This sort of model-based testing is going to be essential to verify the complex but fast implementation I have for my real problem against the obvious but insanely verbose and slow implementation that I can put in my test.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Aren't Haskell arrays amazing though? I was genuinely stunned when I realised I could do table-driven methods so elegantly. There's a nice tutorial to Haskell arrays in the "<a href="http://archive.today/o/uiYDs/www.haskell.org/tutorial/arrays.html" title="A nice basic array tutorial that I should have read myself while figuring this out except that I wrote it on the tube where there's no interweb" target="_blank">gentle introduction</a>"</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/haskell_arrays" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-11-12T21:00:27Z</div>
</div>
<div title="Using a Linux laptop in text mode" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/textmode" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Using a Linux laptop in text mode</a></h2>
<div style="text-align:left;font-style:italic;">Linux has everything you need to use your laptop even if you choose not to use the pointy-clicky interfaces</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So having recently got a
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/netbook.mrk" title="In which I talk about my netbook" target="_blank">netbook</a>, I have been learning how to do everything on it. It's obviously all easy if you use something like
<a href="http://archive.today/o/uiYDs/www.xfce.org/" title="XFCE - A lightweight Linux desktop" target="_blank">xfce</a>
or <a href="http://archive.today/o/uiYDs/www.gnome.org/" title="gnome - the standard desktop for Fedora Linux" target="_blank">gnome</a>, or some netbook-specific spin like the
<a href="http://archive.today/o/uiYDs/www.ubuntu.com/GetUbuntu/download-netbook" title="A powerful, yet friendly netbook-specific Linux variant" target="_blank">Ubuntu netbook remix</a>, but I like to use
<a href="http://archive.today/o/uiYDs/xmonad.org/" title="xmonad - A lightweight x window manager" target="_blank">xmonad</a>, so it helps to learn how to do all the laptoppy things in text mode.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Here's a list of things it's useful to know:</div>
<ul style="text-align:left;">
<li style="text-align:left;">nm-applet - finds a network and connects to it automagically</li>
<li style="text-align:left;">pm-suspend - sends your laptop into a light sleep</li>
<li style="text-align:left;">pm-hibernate - sends your laptop into a heavy sleep where it uses no battery</li>
</ul>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/textmode" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-10-17T13:05:22Z</div>
</div>
<div title="I've got a new netbook" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/netbook" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">I've got a new netbook</a></h2>
<div style="text-align:left;font-style:italic;">So finally I give in to temptation...</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This week I bought a new netbook (an Acer Aspire One Pro P531). I was determined to reward someone who sells a Linux netbook but in spite of my best efforts noone was selling the sort of configuration I wanted (big SSD drive, 2GB memory) without Windows XP. So I bought one and installed
<a href="http://archive.today/o/uiYDs/www.fedoraproject.org/" title="Fedora - the free version of RedHat Linux" target="_blank">Fedora</a>
on it myself.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">It's a fantasticlittle device and everything on it just works with Fedora. Apart from the ethernet card which seems not to want to dhcp (although that might be some incompatibility with my home hub/router/adsl thingy).</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I'm using it with
<a href="http://archive.today/o/uiYDs/xmonad.org/" title="Xmonad - an amazingly productive, minimalist X environment" target="_blank">Xmonad</a>
to do random bits of <a href="http://archive.today/o/uiYDs/www.haskell.org/" title="Haskell - a wonderful pure functional programming language" target="_blank">Haskell</a>
tinkering when I take the tube to work in the morning. The keyboard is a bit fiddly, but manageable, and the small form factor and light weight are terrific. In this respect it reminds me a little of my old sony vaio which was a sort of expensive predecessor to a netbook that I got second hand.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">One thing I would have done differently if I had done more research is to get the other sort of
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Intel_Atom" title="Intel atom processor architecture" target="_blank">Atom processor</a>. Ones with an "N" or a "Z" at the front are based on the i686 architecture, whereas ones without that are x86_64 based. Since I have an x86_64 desktop pc at home it would have been slightly more convenient not to have to download two seperate fedora versions. The upside of this one is I think it has slightly better battery life. In fact, battery life seems amazing.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/netbook" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-10-17T10:32:22Z</div>
</div>
<div title="n-Bit Gray codes in Haskell" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/gray_codes" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">n-Bit Gray codes in Haskell</a></h2>
<div style="text-align:left;font-style:italic;">A first step in what will become a combinatorics library</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I have been playing around with Gray's reflected binary code (aka
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Gray_code" title="More about Gray code" target="_blank">Gray codes</a>) and similar things a bit. Before I reveal why I'm doing this lets just dive in and write some code. Gray's algorithm is described well
<a href="http://archive.today/o/uiYDs/www.cs.auckland.ac.nz/CDMTCS//researchreports/304bob.pdf" title="Paper explaining the algorithm" target="_blank">here</a>. The code which follows is in
<a href="http://archive.today/o/uiYDs/www.haskell.org/" title="the world's most beautiful programming language" target="_blank">haskell</a>, because it's a really fantastic language and I'm playing around with it at the moment. For scala fans, don't worry. I haven't abandoned scala, this is a parallel effort.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So for starters we need a datatype for representing these things. This is how you define an algebraic datatype in haskell. In what follows, lines beginning "--" are single-line comments</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">-- | 'Bit' is the datatype for representing a bit in a gray code.  
data Bit = Zero | One deriving Show
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Alright. So we have a type "Bit" with two constructors Zero and One and a "deriving Show" which means haskell figures out how to turn it into a string. This is useful when you're in ghci (the interactive haskell environment) debugging.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">-- prepend a given item onto each of a list of lists (probably something to do this in the prelude)
prepend :: a -&#62; [[a]] -&#62; [[a]]
prepend t xs = map (t:) xs
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">A teeny helper function. Given a list of lists and a thing it sticks the thing on the front of each list in the outer list. This would append the thing on the end of each list:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">append :: a -&#62; [[a]] -&#62; [[a]]
append t xs = map (++[t]) xs
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Note I'm writing the type signatures explicitly but there's absolutely no problem if you leave them off. So let's generate our Gray codes:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">-- | 'gray' generates the gray code sequence of length 'n'
gray :: Int -&#62; [[Bit]]
gray 1 = [ [Zero], [One] ]
gray n = prepend Zero (gray (n-1)) ++ prepend One (descGray (n-1))

-- | 'descgray' generates the reversed gray code sequence of length 'n'
descGray :: Int -&#62; [[Bit]]
descGray 1 = [ [One], [Zero] ]
descGray n = prepend One (gray (n-1)) ++ prepend Zero (descGray (n-1))
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So we get an ascending and a descending one for free. Since the descending one is just the ascending one in reverse why (you might say) don't I just define descGray as descGray = reverse.gray ? Indeed, that may be a reasonable thing to do. I'm doing it this way to try to preserve as much laziness as possible, and (although my haskell-fu is still very weak at the moment) I think that if you reverse a list you pretty much have to evaluate each thing in the list. If you read the paper you'll see that this is Gray's (naive) algorithm and there has been an astonishing amount of research in this area leading to more efficient algorithms. I'll give those a crack at some point.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Why am I doing this? You'll see. This is at the heart of building a really cool combinatorics library. I needed something that could enumerate all combinations and permutations of various generic distribution-type things. There are similar but more recent orderings that are comparable to gray codes which I'm also looking into. They'll all be presented here in due course.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/gray_codes" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-08-22T06:29:35Z</div>
</div>
<div title="Which language would you use?" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/language" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Which language would you use?</a></h2>
<div style="text-align:left;font-style:italic;">It depends</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I got a mail a few days ago about how I wrote a couple of articles with code for an options pricer in ocaml but all my latest articles were about scala. So which language would I use today if I were to write an options pricer. The answer of course is "it depends".</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now in and of themselves both ocaml and scala are fine choices for writing just about anything. But there are tradeoffs. If I was in charge of development of a brand new pricing and risk infrastructure for a big bank that had to be able to price everything from a stock to a digital multi-asset multi-barrier callable bermudan range-accrual thingummybobber that was going to be worked on by a thousand people ranging from the lowliest intern to the most brilliant genius then I have no hesitation in saying I would use scala.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In fact a friend of mine who is in charge of the development of risk and pricing systems at a major wall st firm told me that if he was building this infrastructure far a bank from scratch today he would use scala. He's the guy who persuaded me to try scala in the first place as a matter of fact.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The reasons this would be a fine choice should be obvious- it's very simple to write serious software in scala, it shouldn't take anyone of reasonable ability much time at all to learn, the syntax is not overly burdensome and tedious, performance is adequate or better for most things, the concurrency paradigm is tractable by normal human beings and there is fantastic library support because you can just use java stuff. The extensible syntax would help for various things and the cross-platform support is always a nice thing to have if you want to have number-crunching on a Linux compute farm and desktop apps on Windows or whatever.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">On the other hand if I was setting up a small quant trading shop/hedge fund or doing it for my own benefit then the choices are much more varied. I might use scala still (it would still be an excellent choice), I might do it in ocaml (or even Haskell in fact), particularly if I was going to be all or most of the programming myself or I had access to recruit a decent pipeline of smart functional-programming aware people.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The benefits of doing it in ocaml (or Haskell) would be that I would probably have a more mentally-stimulating time doing it (this is can be an important motivation also if you have a super-bright team), and would probably end up with something more aesthetically pleasing from a pure comp-sci point of view.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">On the other hand I would certainly have more frustrations (eg Why has no-one noticed that you can only do one request through the ocaml curl library because there is a memory scribble? But I digress). I wouldn't really want to lead a group of 100 guys and have to keep teaching haskell monad combinators or whatever every time a new person joined. And maintaining/code reviewing etc could become excruciating when you were dealing with people of average ability less one or two standard deviations.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So horses for courses. Ultimately writing good software always requires thought, discipline and some skill. The right language fits the problem domain and suits the group and organization. Good programmers can learn to write good software in any language.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/language" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-08-20T21:35:41Z</div>
</div>
<div title="Website Changes" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/website" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Website Changes</a></h2>
<div style="text-align:left;font-style:italic;">An occasionally-updated summary of stuff I've changed</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So when I had a day off work this week I decided to fix a few things on this site that have been bugging me for a while:</div>
<ul style="text-align:left;">
<li style="text-align:left;">most of the content is dynamic, yet the
<a href="http://archive.today/o/uiYDs/www.sitemaps.org/" title="Home of the sitemaps protocol" style="text-align:left;" target="_blank">sitemap</a>
(used by search engines to figure out how to slurp your site) was not</li>
<li style="text-align:left;">I never bothered to put proper
<a href="http://archive.today/o/uiYDs/www.google.com/support/webmasters/bin/answer.py?answer=35264&amp;hl=en%231" title="google's view of how to make good page description tags" style="text-align:left;" target="_blank">meta description tags</a>
on pages</li>
<li style="text-align:left;">now that there were quite a few articles things were getting lost in painful navigation</li>
<li style="text-align:left;">The site didn't do gzip encoding</li>
<li style="text-align:left;">I've finally added comments thanks to
<a href="http://archive.today/o/uiYDs/intensedebate.com/" title="Third-party ajax comments thingummybobber" style="text-align:left;" target="_blank">intense debate</a></li>
</ul>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So I've had a go at fixing them. I now generate my sitemaps automatically using the code I wrote to generate the atom and rss feeds, transparently gzip stuff if your client can accept that, and there is a new "<a href="http://archive.today/o/uiYDs/www.uncarved.com/treeview/" target="_blank">treeview</a>" page on the side to make things easier to get to. Oh, and the pages have proper description tags which should make them more useful on search engines.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Hope this all helps.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/website" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-08-07T09:48:28Z</div>
</div>
<div title="Adding comments" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/Comments" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Adding comments</a></h2>
<div style="text-align:left;font-style:italic;">So I've thought about doing this for some time but never had the spare time. Finally I add comments.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I have added comments for the first time. I don't expect there will be a great deal of traffic and at the moment just to get started I have moderation on. If things seem to be resonably calm and the wingnuts stay away, I'll turn moderation off.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I'm using the comment system from
<a href="http://archive.today/o/uiYDs/intensedebate.com/" title="Slick third-party blog comments system" target="_blank">intense debate</a>, which has been fantastically easy to set up and use so far. Let me know what you think.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/Comments" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-08-07T09:44:52Z</div>
</div>
<div title="Thank goodness for greasemonkey" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/no_smileys" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Thank goodness for greasemonkey</a></h2>
<div style="text-align:left;font-style:italic;">Google recently added an extremely annoying feature to google reader. Thankfully you can decide for yourself how their website works.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Every morning I drink my coffee and read various news sites using google
<a href="http://archive.today/o/uiYDs/reader.google.com/" title="Google's web RSS Reader" target="_blank">reader</a>, so I was horrified recently to see a big yellow smiley popping up on a bunch of posts. This is some sort of social-networking-inspired feature which allows people to say which posts they "like", then anyone else reading that post gets a smiley to say "6 people liked this post" or whatever.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Perhaps this is just the ticket if you're desperately insecure about whether or not your taste in news is in tune with the mainstream of the internets, but as someone who does not give a flying... err monkeys about what other people think (by and large) I hate this feature. In fact, clicking through to the google forum on this feature I find that it turns out there are a lot of people who do not "like" reader's new "like" feature.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Thanks to the miracle of
<a href="http://archive.today/o/uiYDs/www.greasespot.net/" title="Greasemonkey - the awesome user website rewrite thingummybobber for firefox" target="_blank">greasemonkey</a>
I can decide for myself what google's site looks (and works) like in my browser, and in fact Jason Fager has already <a href="http://archive.today/o/uiYDs/jasonfager.com/?p=569" title="Jason Fager's greasemonkey recipe for killing the horrible smileys" target="_blank">posted</a>
a greasemonkey script that removes the offending smileys.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/no_smileys" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-07-20T19:58:05Z</div>
</div>
<div title="Not Memoization" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/not_memoization" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Not Memoization</a></h2>
<div style="text-align:left;font-style:italic;">Sometimes you need a better algorithm, rather than papering over the cracks with optimisation</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Sometimes
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Memoization" title="Memoization description on Wikipedia" target="_blank">memoization</a>
is a useful technique for optimisation, but when you see it explained,it is often demonstrated using little explanatory code or algorithms that show the technique itself well, but are not the best way of achieving their supposed purpose. So you may see a small Fibonacci function for example, that demonstrates memoization well, but is a bad way of calculating Fibonacci numbers.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The same is true of recursion. You will often see something like this factorial function used to demonstrate recursion:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">def fact(n: Int) : BigInt = {
    assert(n&#62;=0, "factorial is only defined over non-negative integers")
    if(n==0) then 1
    else fact(n-1) * n
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and the article will then go on to demonstrate how to get the tail call optimisation to work so you don't run out of stack space. Or alternatively, will use this as an example of how you memoize a
<a href="http://archive.today/o/uiYDs/michid.wordpress.com/2009/02/23/function_mem/" title="Hoops you need to jump through to memoize a recursive fn" target="_blank">recursive function</a>. The fact is that this is just a really bad way to write a factorial function. Here's one that is not bad:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">def fact(n: Int) = {
    assert(n&#62;=0, "factorial is only defined over non-negative integers")
    (BigInt(1) /: (1 to n)) (_*_)
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Note that we don't need to rely on any special optimisations and this solution runs in constant space and in O(n) time. All we are doing is folding over the range from 1 to the n and multiplying as we go. To put it another way, we are going from the bottom up. Amusingly when we go from the bottom up, we get a function application that looks like butt-cheeks (I can't be the only person to have noticed that).</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now it doesn't take a genius to figure out how we use a memoization-like technique to optimise this if we want to. (I know that it can't because I thought of how to optimise it and I'm no genius)</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">object Factorial {
    import scala.collection.mutable.ArrayBuffer

    private val cache : ArrayBuffer[BigInt] = new ArrayBuffer()
    cache += 1
    cache += 1

    def apply(n: Int) = {
        assert(n&#62;=0, "Factorial is only defined over non-negative integers")
        if(n&#62;cache.length-1) {
            for(idx&#60;-cache.length to n)
                cache += cache(idx-1) * idx
        }

        cache(n)
    }
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So we make an array and store the intermediate results in it so that if we are called later for a value that we have already computed, we can simply return it from the array. Because we are using an array, the lookup happens in constant time with little or no constant overhead, rather than using a map or hash as is usually required for general memoization. We can do this because we know the space of inputs is not sparse - we need to compute every intermediate value anyway so we may as well cache them.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is not memoization because what we are caching is not (just) the result of the function invocation but all partial results. As such, our optimisation has more in common with techniques used in
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Dynamic_programming" title="Dynamic programming page on wikipedia.  Sorely lacking a 'Dynamic programming in popular culture' section" target="_blank">dynamic programming</a>.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The point is that writing the best algorithm is almost always the best optimisation you can do, and if you're jumping through hoops to optimise something, it may be because there's a better way to do it. In the words of
<a href="http://archive.today/o/uiYDs/www.nadiaboulanger.org/" title="the great musical composition teacher" target="_blank">Nadia Boulanger</a>, "Never strain to avoid the obvious".
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">P.S. If you're computing Fibonacci numbers recursively, you are living in a state of sin. Please use the
<a href="http://archive.today/o/uiYDs/mathworld.wolfram.com/FibonacciNumber.html" title="Fibonacci numbers, including closed form solutions" target="_blank">closed form solution</a>. Thanks.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/not_memoization" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-06-12T03:39:14Z</div>
</div>
<div title="Memoization in scala" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/memoization" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Memoization in scala</a></h2>
<div style="text-align:left;font-style:italic;">A simple, yet effective optimization technique</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I've been off work ill today, but reading was getting on my nerves, so I decided to do more work in scala, and wrote some
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/scala/helpers/doc/com/uncarved/helpers/Memoize$object.html" title="The main factory object used to do the memoization" target="_blank">objects</a>
to do easy <a href="http://archive.today/o/uiYDs/www.itl.nist.gov/div897/sqg/dads/HTML/memoize.html" title="Memoization definition" target="_blank">Memoization</a>. I thought I needed them to optimise something else that I was doing, then found a
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/not_memoization.mrk" title="Sometimes a better algo is better than optimising the bad algo you have" target="_blank">better way</a>
to do it without classical memoization (<em>sigh</em>).</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The code was heavily based on something I found
<a href="http://archive.today/o/uiYDs/michid.wordpress.com/2009/02/23/function_mem/" title="Scala memoization code I adapted, with some discussion of the issues" target="_blank">here</a>
(hat tip <a href="http://archive.today/o/uiYDs/michid.wordpress.com/" title="Michid's scala weblog" target="_blank">michid</a>), with minor tweaks of my own. Here's how you use the memo classes anyway:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">scala&#62; import com.uncarved.helpers.Memoize
scala&#62; val circArea =
  |       Memoize((r:Double)=&#62;Math.Pi * Math.pow(r,2))
circArea: com.uncarved.helpers.Memoize.MemoizedFunction1[Double,Double] = &#60;function&#62;

scala&#62;   val area = circArea(2)
area: Double = 12.566370614359172
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So you can use something like a function and it seems to do the right thing. "But how", you may well ask, "do I know it's actually memoizing and this isn't all a big trick?". A fair and honest question. We need to add a function that has a side-effect so we can demonstrate that it is in fact doing the right thing.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">We need a function that will print something to the terminal when the calculation is actually invoked. When it isn't, it will return the same result, but without any printing.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">scala&#62;   val cylVol = Memoize {            
 |       (r:Double, h:Double) =&#62;
 |         val vol = Math.Pi * Math.pow(r,2) * h
 |         println("Radius: " + r + " Height: " + 
 |             h + " Volume: " + vol)
 |       vol                                                               
 |  }                                                         
cylVol: com.uncarved.helpers.Memoize.MemoizedFunction2[Double,Double,Double] = &#60;function&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The first time we invoke our function it hits the print statement:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">scala&#62; cylVol(3,4.5)
Radius: 3.0 Height: 4.5 Volume: 127.23450247038662
res1: Double = 127.23450247038662
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...but when we invoke the function again on identical arguments, the cached result is used, so we don't see the print.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">scala&#62; cylVol(3,4.5)
res2: Double = 127.23450247038662
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">If the arguments change, a fresh invocation is made.
</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">scala&#62; cylVol(3,4)  
Radius: 3.0 Height: 4.0 Volume: 113.09733552923255
res3: Double = 113.09733552923255
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">You can get the code and libs by using sbaz to update your uncarved-helpers package, or just via the
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/scala/uncarved-helpers-0.3.tgz" title="Uncarved helpers tarball" target="_blank">tarball</a>. For the curious, here's the full text of the
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/scala/Memo.scala.html" title="Colourized scala code for Memoization classes (generated by :runtime! syntax/2html.vim)" target="_blank">scala</a>
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/scala/Memo.scala" title="Scala code for Memoization helpers in plain ole text" target="_blank">code</a>.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/memoization" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-06-12T03:32:11Z</div>
</div>
<div title="How do unix file permissions work?" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/permissions" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">How do unix file permissions work?</a></h2>
<div style="text-align:left;font-style:italic;">Unix provides fine-grained access control for files. It's important to understand it.</div>
<h4 style="text-align:left;">What unix file permissions are</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">At their most basic, unix file permissions are a set of bits which control who has the permission to read from, write to and execute files. They have similar, but slightly different meanings as applied to directories. The mode is normally expressed either as a symbolic string of gibberish or as a numeric mode.</div>
<h4 style="text-align:left;">Numeric file permissions</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">A numeric mode is normally expressed as set of three or four octal digits but can be any length up to four. Any ommitted digits are assumed to be leading zeroes. The first digit is the sum of the "set uid" (4), "set gid" (2), and "sticky" (1) attributes. If you need these you know what they mean. Otherwise, move along please. The second digit sets permissions for the owner of the file to read(4), write(2), and execute(1) the file. The third sets permissions for members of the group specified as the group owner of the file and the fourth for people not in the file's group, with the same values for read, write and execute as the user permission digit. You figure out what permissions you need by adding the bits together. If I want a file to be readable and writeable by me and its group and just readable by others, I might run chmod 664 file to change the mode of the file.</div>
<h4 style="text-align:left;">Symbolic file permissions</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">commands which deal with file permissions often allow you to specify symbolic permissions as follows: u user g group o other r read w write x execute + add specified permission - remove specified permission = make permission exactly equal to this</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So in the example above, I could achieve the results I wanted by chmod ug=rw,o=r file or by looking at the current file mode and using "+" or "-" as appropriate. For example, to remove group and world write and execute permissions on a file I might do chmod go-wx file. See the man chmod for more details. On linux boxes you may have to do info chmod to get all the details because the GNU project don't like manual pages.</div>
<h4 style="text-align:left;">Finding out file permissions</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">You can see a symbolic representation of the permissions on a file or directory by using ls -l. If you want to understand why files you create get the permissions they do, read about how
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/umasks.mrk" target="_blank">umasks</a>
work.</div>
<h4 style="text-align:left;">Special file permissions</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I said "move along please", but to reward you for your persistence, these are the meanings of the leftmost digit of four-digit octal file permissions. Note: Do not use these unless you really know what you are doing. The setuid and setgid bits on files in particular have been responsible for many serious security breaches when thoughtlessly applied to unworthy programs.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">When set on files:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">Numeric Symbolic    Name    Meaning
4000    u+s setuid bit  If the file is executed, set the effective user id of the resultant process to the owner of the file.
2000    g+s setgid bit  If the file is executed, set the effective group id of the resultant process to the group owner of the file.
1000    t   sticky bit  No effect. On ancient systems it means "Save the text image of the program to swap to speed up load time".
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">When applied to directories, the meanings of these bits are subtly different and more system- and filesystem-dependent:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">Numeric Symbolic    Name    Meaning
4000    u+s setuid bit  No effect
2000    g+s setgid bit  Set the group owner of files created in this directory to the group of the group owner of the directory instead of the primary group of the file's creator
1000    t   sticky bit or "restricted delete flag"  On some systems it means prevent users from removing or renaming files in this directory unless they own the file or directory
</code></pre>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/permissions" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-06-12T03:24:41Z</div>
</div>
<div title="How do unix umasks work?" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/umasks" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">How do unix umasks work?</a></h2>
<div style="text-align:left;font-style:italic;">Often file permission problems on unix systems are caused by users who don't understand their umask and set it properly</div>
<h4 style="text-align:left;">What is a umask?</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">A umask is a bitmask by means of which a user can affect the default permissions of files they create on unix systems. You should find out what
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/permissions.mrk" target="_blank">file permissions</a>
are if you are unsure. Its important to fully appreciate that a umask is not a default permission <em>set</em>
it is a default permission <em>mask</em>
so bits in the mask are the bits which you want <em>not</em>
to be in the permissions of the file. A umask of 777 will thus mean that processes create files with permissions of zero whereas one of 0 will create files with full permissions thussly:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% umask 777                                                
% touch foo                                                
% umask 0                                                  
% touch bar                                                
% ls -l foo bar                                            
-rw-rw-rw-    1 sean   sean             0 Jul  2 11:15 bar
----------    1 sean   sean             0 Jul  2 11:15 foo
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now you might well wonder why (if my umask is zero) the execute bits aren't also being set on "bar"? Lets see what "touch" is doing under the covers...</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% strace touch furb 2&#62;&#38;1 | grep furb 
execve("/bin/touch", ["touch", "furb"], [/* 137 vars */]) = 0
open("furb", O_WRONLY|O_NONBLOCK|O_CREAT|O_NOCTTY|O_LARGEFILE, 0666) = 3
utime("furb", NULL)                     = 0
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">As you can see, the "touch" process only tries to create the file with permissions of 0666. The permissions requested at
<code style="font-size:85%;">open(2)</code>
are then masked by the umask and the bits requested in the <code style="font-size:85%;">open(2)</code>
call that are not in the mask end up in the permissions of the file created. Processes (such as compilers) which know they are creating executable files will generally use <code style="font-size:85%;">open(2)</code>
with the execute bits set as well. Because umask is a mask it can't raise the permissions higher than the process asks for in the <code style="font-size:85%;">open(2)</code>
call. The same is true of any other process which opens files.</div>
<h4 style="text-align:left;">How do I change my umask?</h4>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now, if you want to change your umask, the command you want is the shell builtin called
<code style="font-size:85%;">umask</code>
not <code style="font-size:85%;">/usr/bin/umask</code>. From
<code style="font-size:85%;">man umask</code>:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">/usr/bin/umask
The umask utility sets the file mode creation  mask  of  the
current  shell  execution environment to the value specified
by the mask operand.  This mask affects the initial value of
the  file permission bits of subsequently created files.  If
umask is called in a subshell or separate utility  execution
environment, such as one of the following:
    (umask 002)
    nohup umask ...
    find . -exec umask ...
it does not affect  the  file  mode  creation  mask  of  the
caller's environment.

If the mask operand is  not  specified,  the  umask  utility
writes  the  value of the invoking process's file mode crea-
tion mask to standard output.
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Let's just see if that's true, shall we?</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% umask                 #check my current umask
022
% /usr/bin/umask 0      #try to change it using /usr/bin/umask
% umask                 #Did it work?  No!
022
% umask 0               #try to change it using the builtin umask
% umask                 #Did it work?  Yes!                              
000
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So it is true. Why? The reason is that the shell does a
<code style="font-size:85%;">fork(2)</code>
to create a copy of itself to run the <code style="font-size:85%;">/usr/bin/umask process</code>, so then even if that process sets its own umask, those values happen in the child process and don't end up in the calling process when the child quits. That's why you need the shell builtin if you want to change your umask. If you don't understand, just always type umask and never
<code style="font-size:85%;">/usr/bin/umask</code>.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now you know why you need to use chmod +x to set the "execute" bits on the things you want to be executable. Its particularly important to get file permissions set correctly before checking them in to CVS because all future checkouts of a file have the file permissions which a file had when it was first checked in unless someone tinkers in the repository.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/umasks" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-06-12T03:23:42Z</div>
</div>
<div title="Set of scala helper classes" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/uncarved-helpers" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Set of scala helper classes</a></h2>
<div style="text-align:left;font-style:italic;">Learning scala, I've started to write some generally useful stuff and make it available</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/uncarved-helpers" target="_blank">permalink</a>
Last updated: 2009-05-23T21:10:48Z</div>
</div>
<div title="Eat Toast!" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/toast" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Eat Toast!</a></h2>
<div style="text-align:left;font-style:italic;">Strength. Vitality. Nutrition.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Breakfast this morning was a farce.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I went to the canteen at the place where I work. I had a headache and was feeling a bit shit. Prescription: toast.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">They have shiny new toasters. I put a bagel in the toaster and go pick up a drink. The toasters have not been assembled correctly so the toasted bagel goes out the far side of the toaster and falls down behind the counter. VERY LOUD canteen woman comes over to see what's wrong. I tell her the new toaster is buggered and my bagel has fallen down behind the counter. Pissed off I start wandering to the other bit of the canteen to get a coffee.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">VERY LOUD woman starts shouting at me from behind the counter across the canteen. EXCUSE ME SIR! EXCUSE ME SIR! I turn around and see she is waving the bagel which she has picked up off the floor. Not sure what she wants me to do about it so I ignore her.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">She is not deterred. EXCUSE ME SIR! EXCUSE ME SIR! She's shouting. "She'll stop soon", I think, and continue wandering over to get coffee. Now another canteen guy has joined in, and is following me across the canteen. "Excuse me sir, she's trying to get your attention". "I know. I don't want to talk to her". EXCUSE ME SIR! EXCUSE ME SIR!</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">By now I am at the counter in the coffee place. "What's the problem?" says the guy who has followed me all the way over from the other bit of the canteen. "I don't know" say I, "but your toaster's broken. I'm just trying to get coffee.".</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">"Are you going to pay for that drink?" he says</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">"Yes".</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Him, (to person behind the coffee bar) "Make sure he pays for that drink".</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/toast" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/thoughts" target="_blank">thoughts</a>
</span>
Last updated: 2009-05-22T08:18:37Z</div>
</div>
<div title="An Introduction to Genetic Algorithms" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/genetic_algorithms" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">An Introduction to Genetic Algorithms</a></h2>
<div style="text-align:left;font-style:italic;">Review of Melanie Mitchell's excellent book</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So today is
<a href="http://archive.today/o/uiYDs/findingada.com/" title="Ada Lovelace Day website" target="_blank">Ada Lovelace Day</a>, and the challenge has been thrown down to write about women in technology. Now there are many obvious candidates (Grace Hopper for one), but I decided to write instead a review of an excellent computer science book that just happens to have a female author. I originally bought
<a href="http://archive.today/o/uiYDs/www.amazon.co.uk/Introduction-Genetic-Algorithms-Complex-Adaptive/dp/0262631857/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1237968270&amp;sr=8-1" title="Amazon.co.uk link" target="_blank">this book</a>
from a second-hand bookshop for five pounds. I liked it so much that when I lost my original copy I bought it again at full price. </div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I have been interested for years in GAs and have read fairly widely. Koza, Holland etc etc etc. Many of those books adopt either a sort of messianic tone, implying that this one technique will solve all the problems of the world, or the typical academic approach of attempting to make your work sound as difficult and important as possible while simultaneously undermining all the work of your peers in the field.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Mitchell's book could not be more different. It explains the basic approaches clearly, and in enough detail to inspire further study. She has an excellent grasp of the pros and cons of the approach and it's promise, and it's mercifully short. An excellent read and real kudos to Mitchell for an approachable and readable introduction to the field.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/genetic_algorithms" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/reviews" target="_blank">reviews</a>
</span>
Last updated: 2009-03-25T08:17:29Z</div>
</div>
<div title="That was painful" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/painful" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">That was painful</a></h2>
<div style="text-align:left;font-style:italic;">Migrating everything to a new server</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So a couple of weeks ago I finally became annoyed enough at having to use a virtual linux server that I shelled out the extra and was upgraded to a dedicated box of my very own in co-lo. Mostly this was totally seemless and I even looked forward to the differences given that I was moving to Centos from Debian. One thing, however, was extremely painful. Moving this website.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So uncarved.com uses a python script that I wrote ages ago using an early version of
<a href="http://archive.today/o/uiYDs/www.webpy.org/" title="Python web framework" target="_blank">web.py</a>. However, at the time it had pretty whacky database support, didn't have it's own template engine (so it used Cheetah) and had a few wierd bugs which I had hacked around in my local copy. As such, upgrading has been a real pain because I had to change the code to the new api, then hack all my templates to the new syntax (I initially tried to carry on using cheetah, but cheetah has changed and it was even more excruciating to get that working so I took the plunge). Anyway, it seems to have worked.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/painful" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-02-06T14:39:14Z</div>
</div>
<div title="I  Ching in ML" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ching_ml" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">I Ching in ML</a></h2>
<div style="text-align:left;font-style:italic;">In which I write yet another implementation of the book of changes (this time in ocaml)</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I decided to rewrite my python I Ching in ocaml. This is interesting to do in some respects as it's not really a traditional functional programming task.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">First we define the two basic oracles, the coin oracle and the yarrow stalk oracle. Obviously on a computer we are actually sampling the same probability distribution as the oracle, not simulating the process itself. How I do this is to just make a static array of all the outcomes and then choose from them with uniform probability. This is a lot easier to write (and understand) than trying to make a multifaceted biased coin and is equivalent from a probability point of view.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let (consult_coin, consult_yarrow) = 
  (** choose one item from a given array with uniform probability *)
  let choose arr =
    let size = Array.length arr in
    let idx = Random.int(size) in
    arr.(idx) 
  in
  (* ...use this to consult the coin oracle... *)
  let consult_coin () =
    let outcomes = [| 
      9; 9;               (* Moving Yang --- x --- *)
      7; 7; 7; 7; 7; 7;   (* Stable Yang --------- *)
      8; 8; 8; 8; 8; 8;   (* Stable Yin  ---   --- *)
      6; 6                (* Moving Yin  --- o --- *)
    |] 
    in
      choose outcomes
  in
  (* ...and the yarrow oracle also. *)
  let consult_yarrow () =
    let outcomes = [| 
      9; 9; 9;             (* Moving Yang --- x --- *)
      7; 7; 7; 7; 7;       (* Stable Yang --------- *)
      8; 8; 8; 8; 8; 8; 8; (* Stable Yin  ---   --- *)
      6;                   (* Moving Yin  --- o --- *)
    |] 
    in
      choose outcomes
  in
    (consult_coin, consult_yarrow)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is an example of how you define let binding which is private, yet shared by more than one function. In this case it's "choose", a helper function which just picks an element from an array. So we just define two public functions:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">val consult_coin : unit -&#62; int = &#60;fun&#62;
val consult_yarrow : unit -&#62; int = &#60;fun&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Given those two functions, it's easy to return a hexagram using a given oracle.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let get_hexagram ?(oracle=consult_yarrow) () =
  let rec pick lis =
    let len = List.length lis in
    if(len==6) then lis else pick ((oracle ())::lis)
  in
    pick []
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">A single divination actually derives two hexagrams, representing a change from one state to another. The original single hexagram contains "moving" lines which are inverted in the second one.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let get_hexagram_pair ?(oracle=consult_yarrow) ?(lines=[]) () =
  let lines = if(lines==[]) then (get_hexagram ~oracle ()) else lines in
  (* Given a hexagram, return a version with no moving lines by  
   * simply disregarding their moving statement.  Moving yang becomes 
   * yang, moving yin becomes yin *)
  let rec ignore_moving = 
    function
        [] -&#62; []
      | 9::res -&#62; 7::(ignore_moving res)
      | 6::res -&#62; 8::(ignore_moving res)
      | hd::res -&#62; hd::(ignore_moving res)
  in
  (* Given a hexagram, return a version with no moving lines by
   * inverting moving lines.  Moving yang becomes yin, moving yin 
   * becomes yang *)
  let rec invert_moving = 
    function
        [] -&#62; []
      | 9::res -&#62; 8::(invert_moving res)
      | 6::res -&#62; 7::(invert_moving res)
      | hd::res -&#62; hd::(invert_moving res)
  in
    (ignore_moving lines),(invert_moving lines)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now you have the guts of a working I Ching. Full text of the code is
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/ching.ml" title="The I-Ching implemented in ocaml" target="_blank">here</a>.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ching_ml" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2008-12-09T13:42:33Z</div>
</div>
<div title="Changing to a kinesis keyboard" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/kinesis" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Changing to a kinesis keyboard</a></h2>
<div style="text-align:left;font-style:italic;">I thought I would never find a keyboard that I liked better than Typematrix, but I may have to eat my words...</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Until yesterday, I used to use a
<a href="http://archive.today/o/uiYDs/www.typematrix.com/" target="_blank">typematrix</a>
<a href="http://archive.today/o/uiYDs/www.mwbrooks.com/dvorak/" target="_blank">dvorak</a>
keyboard. Typematrix is a fabulous keyboard with lots of terrific design features but its primary strength is that it has a small desktop footprint, and that it uses straight forward and back movements of the fingers without any of the small left and right movements that are required due to the staggered layouts of conventional keyboards. This is a massive improvement if you do a lot of typing or if you have problems with your hands and wrists.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The one weakness of the typematrix in my opinion is that the modifier keys (ctrl and alt) are not placed in a very convenient spot. This used not to bother me as I am a Vim user and so didn't require lots of control keystrokes. However, recently I have been doing almost all of my programming in a proprietary in-house environment and this has been causing my pinkies to take more and more of the strain. I finally decided to make the switch when I had a marathon coding day where I wrote something like 600 lines of very formulaic code in a day and my fingers were aching from the funny contortions I had been putting them through with all of the control keystrokes that had been required.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I briefly tried out one of my colleagues
<a href="http://archive.today/o/uiYDs/www.kinesis-ergo.com/advantage.htm" target="_blank">kinesis</a>
"Advantage" keyboards and immediately decided that it was weird enough that I should buy one. I opted for a model that has an inbuilt hardware dvorak mode. I prefer this so that I am able to use dvorak mode right from the login, rather than switching in user preferences or dotfiles.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So, the kinesis keyboard feels like a substantial unit. When you are typing on it, it has a pleasing clackiness, and the general functionality is good. It has a very cool hardware remapping thing that means you can move the keys you don't like around to your heart's content. It's a really nice keyboard.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/kinesis" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/reviews" target="_blank">reviews</a>
</span>
Last updated: 2008-07-29T11:11:55Z</div>
</div>
<div title="A Functional Test Harness" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/test_fun" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">A Functional Test Harness</a></h2>
<div style="text-align:left;font-style:italic;">Using monads to thread state, we make a purely functional version of the test harness</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">To paraphrase Crocodile Dundee, this isn't a monad tutorial
<a href="http://archive.today/o/uiYDs/enfranchisedmind.com/blog/2007/08/06/a-monad-tutorial-for-ocaml/" target="_blank">this</a>
is a monad tutorial. However, I decided to do something that would help me to understand monads, and that is to use them in a practical way. </div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/testing_ocaml.mrk" target="_blank">object-oriented test framework</a>
we developed doesn't feel very idiomatic and as I learn more about FP, and it feels as if we could do something a lot nicer. So I set about thinking so how to make a purely functional test framework. The first thing that strikes you is how useful state is. In a purely functional framework we have to thread that state through our functions, and one elegant way to do that is through monads.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now if you read the monad tutorial, you will realise that a monad is a magic box and all you can really do with a monad is put something in the box, or apply a function which will return another magic box. This is all very well, but its not great at explaining how (in a practical sense) anything actually gets done.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">We start with what it's going to look like when you actually use the functional test api:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">Test.test_begin &#62;&#62;=
Test.ok "Something which should be true" true_thing &#62;&#62;=
Test.not_ok "Something which should not be false" false_thing &#62;&#62;=
Test.fail_if "This should raise an exception" (fun () -&#62; raise (Failure "aiee")) &#62;&#62;=
Test.test_end
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The &#62;&#62;= is borrowed from Haskell, and is the "bind" operator, which acts as the glue here, sending the state from one function to the next. So our first function (test_begin) needs to create the monad and bung in the starting state. The rest of the functions accept as their last argument the current state in its native form and return the updated state in the State monad. This means that after the arguments that you see above have been applied, they are candidates for the "bind" function.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So without further ado, our monad:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** The basic type sig of a monad *)
module type MONAD = sig
    type 'a t
    val return : 'a -&#62; 'a t
    val bind : 'a t -&#62; ('a -&#62; 'b t) -&#62; 'b t
end

(** our state monad which will bind all our tests together *)
module State : MONAD = struct
    type 'a t = 'a
    let return x = x
    let bind m f = f m
end
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">It would be pretty hard to make anything simpler than that, but it fulfills the requirements to be a monad and it turns out a little goes a long way. Here's our functional test module:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">module Test = struct
    (** the actual state which gets threaded through each fn *)
    type test_state = {n:int; ok:int}

    (** helper fns which return the state when it has succeeded or failed *)
    let succeeded s = State.return {n=s.n+1; ok=s.ok+1}
    let failed s = State.return {n=s.n+1; ok=s.ok}

    (** Pass the initial state into the State monad *)
    let test_begin = State.return {n=0; ok=0}

    (** we use this func tos implement all the rest.  It takes a string and a
    predicate, and the state, then succeeds if the predicate returns true. *)
    let pass_if desc pred s =
    let dots = String.make (50-(min 50 (String.length desc))) '.' in
    Printf.printf "%5.5d: %s ....%s" s.n desc dots;
    try
        if pred () then
        begin
            Printf.printf "ok\n" ;
            succeeded s
        end
        else
        begin
            Printf.printf "not ok\n";
            failed s
        end
    with
        _ -&#62;Printf.printf "not ok (threw exception)\n";
        failed s

    (** Runs a predicate function and fails if it throws or
     returns true.  Otherwise it succeeds *)
    let fail_if desc pred s = pass_if desc (fun () -&#62; not pred) s


    (** Takes a bool and marks the test as succeeded if it is true *)
    let ok desc x s = pass_if desc (fun () -&#62; x) s

    (** Takes a bool and marks the test as failed if it is true *)
    let not_ok desc x s = ok desc (not x) s

    let test_end s =
    Printf.printf "End tests: %d of %d tests passed\n" s.ok s.n ;
    State.return s
end
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Nifty, no? You'll notice that the functions are all very similar to those in the OO version, except that their final argument is a state record, and instead of updating member data in the object, they simply update this state record and use "State.return" to pass it into the State monad. To make the initial code snippet work, the only thing that remains is:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let ( &#62;&#62;= ) = State.bind
</code></pre>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/test_fun" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2008-06-16T07:29:20Z</div>
</div>
<div title="A Simple Ocaml test harness" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/testing_ocaml" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">A Simple Ocaml test harness</a></h2>
<div style="text-align:left;font-style:italic;">It's nice to be able to write tests for code as you go along, so you need a test harness...</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I usually like to be able to write tests as I write code, and to have them run every time the code builds to make sure I haven't broken anything. To do this, you need a test harness so that adding tests is as painless as possible. So I wrote this one:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** test.ml - a simple test harness in ocaml

  This is demonstration code only.  You are free to use it under the
  terms of the Creative Commons Attribution 2.5 license.

  @author Sean Hunter &#60;sean\@uncarved.com&#62;

 *)

(** Test harness class.  Tracks numbers of tests run and how many 
 succeed. *)
class harness =
object(self)
    (** The number of tests so far *)
    val mutable n = 0

    (** The number of tests so far which have succeeded *)
    val mutable succeeded = 0

    (** A name for the group of tests currenly running *)
    val mutable group = ""

    (** Runs a predicate function and fails if it throws or
     returns false.  Otherwise it succeeds *)
    method pass_if desc pred =
      n &#60;- n + 1;
      let dots = String.make (50-(min 50 (String.length desc))) '.' in
      Printf.printf "%5.5d: %s ....%s" n desc dots;

      try
          if pred () then
            begin
                Printf.printf "ok\n" ;
                succeeded &#60;- succeeded + 1;
                true
            end
          else
            begin
              Printf.printf "not ok\n";
              false
            end
      with
      _ -&#62;Printf.printf "not ok (threw exception)\n"; false

    (** Runs a predicate function and fails if it throws or
     returns true.  Otherwise it succeeds *)
    method fail_if desc pred = self#pass_if desc (fun () -&#62; not pred)

    (** Takes a bool and marks the test as succeeded if it is true *)
    method ok desc x = self#pass_if desc (fun () -&#62; x)

    (** Takes a bool and marks the test as failed if it is true *)
    method not_ok desc x = self#ok desc (not x)

    (** Evaluate a predicate, ignoring its result. Succeed if it throws
     an exception, fail if not *)
    method pass_if_throws desc (pred : unit -&#62; bool) =
        try
            (ignore (pred ()));
            self#not_ok desc true
        with
            exn -&#62; self#ok desc true

    (** Evaluate a predicate, ignoring its result. Fail if it throws
     an exception, succeed if not *)
    method fail_if_throws desc (pred : unit -&#62; bool) =
        try
            (ignore (pred ()));
            self#ok desc true
        with
            exn -&#62; self#not_ok desc true

    (** Check that two floats are within a certain tolerance *)
    method pass_if_close ?(eps=1e-9) desc x y = 
        let diff = abs_float (x-.y) in
        self#ok desc (diff &#60;= eps)

    (** mark the beginning of a group of tests *)
    method start_group name =
        n &#60;- 0 ;
        succeeded &#60;- 0;
        group &#60;- name ;
        Printf.printf "Begin test group %s\n" group

    (** mark the end of a group of tests, printing out success count *)
    method end_group  =
        Printf.printf "End test group %s: %d of %d tests passed\n"
            group succeeded n
end;;

(* vim: set syn=ocaml sw=4 ts=4 expandtab: *)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now it's very easy for me to write tests. For example, tests for all my
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/practical_ocaml.mrk" target="_blank">payoff functions</a>
might look like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** payoff_tests.ml - tests for payoff classes

  Written by Sean Hunter &#60;sean@uncarved.com&#62;

  This is demonstration code only.  You are free to use it under the
  terms of the Creative Commons Attribution 2.5 license, but don't
  expect it to accurately price real options.

 *)

let tests = new Test.harness;;

tests#start_group "payoff.ml";;

(* tests for vanilla put and call payoffs *)
tests#ok "Vanilla ITM call" ((Payoff.call 100.0 110.0) = 10.0);;
tests#ok "Vanilla ATM call" ((Payoff.call 100.0 100.0) = 0.0);;
tests#ok "Vanilla OTM call" ((Payoff.call 100.0 90.0) = 0.0);;
tests#ok "Vanilla ITM put" ((Payoff.put 100.0 10.0) = 90.0);;
tests#ok "Vanilla ATM put" ((Payoff.put 100.0 100.0) = 0.0);;
tests#ok "Vanilla OTM put" ((Payoff.put 100.0 190.0) = 0.0);;

(* tests for digital payoffs *)
tests#ok "Digital ITM call" ((Payoff.digital_call 100.0 110.0) = 1.0);;
tests#ok "Digital ATM call" ((Payoff.digital_call 100.0 100.0) = 0.0);;
tests#ok "Digital OTM call" ((Payoff.digital_call 100.0 90.0) = 0.0);;
tests#ok "Digital ITM put" ((Payoff.digital_put 100.0 10.0) = 1.0);;
tests#ok "Digital ATM put" ((Payoff.digital_put 100.0 100.0) = 0.0);;
tests#ok "Digital OTM put" ((Payoff.digital_put 100.0 190.0) = 0.0);;
let dd = Payoff.double_digital ~low:90.0 ~high:110.0;;
tests#ok "Double Digital below the low barrier" ((dd 89.0) = 0.0);;
tests#ok "Double Digital at the low barrier" ((dd 90.0) = 1.0);;
tests#ok "Double Digital inside the low barrier" ((dd 90.1) = 1.0);;
tests#ok "Double Digital inside the high barrier" ((dd 109.9) = 1.0);;
tests#ok "Double Digital at the high barrier" ((dd 110.0) = 1.0);;
tests#ok "Double Digital above the high barrier" ((dd 110.1) = 0.0);;

tests#end_group;;

(* vim: set syn=ocaml sw=4 ts=4 expandtab: *)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and when I run the tests the output looks like this:
</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">    Begin test group payoff.ml
    00001: Vanilla ITM call ......................................ok
    00002: Vanilla ATM call ......................................ok
    00003: Vanilla OTM call ......................................ok
    00004: Vanilla ITM put .......................................ok
    00005: Vanilla ATM put .......................................ok
    00006: Vanilla OTM put .......................................ok
    00007: Digital ITM call ......................................ok
    00008: Digital ATM call ......................................ok
    00009: Digital OTM call ......................................ok
    00010: Digital ITM put .......................................ok
    00011: Digital ATM put .......................................ok
    00012: Digital OTM put .......................................ok
    00013: Double Digital below the low barrier ..................ok
    00014: Double Digital at the low barrier .....................ok
    00015: Double Digital inside the low barrier .................ok
    00016: Double Digital inside the high barrier ................ok
    00017: Double Digital at the high barrier ....................ok
    00018: Double Digital above the high barrier .................ok
    End test group payoff.ml: 18 of 18 tests passed
</code></pre>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/testing_ocaml" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-21T06:34:44Z</div>
</div>
<div title="Ocaml objects part 2" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_classes_2" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Ocaml objects part 2</a></h2>
<div style="text-align:left;font-style:italic;">Parameter objects make more sense when we pass piecewise functions to the pricer</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Unfortunately the class for constant parameters that we developed
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_classes.mrk" target="_blank">before</a>
is just not that useful. We would be better off just using a float if that was all we wanted. The advantage is, however, that we have defined the interface we need for these functions, and what we need is something that can return us the integral of a function and the integral of the square of a function in an interval:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">   method integral :       float -&#62; float -&#62; float
   method integral_sq :    float -&#62; float -&#62; float
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">If we can do that, we can use our function in the mc pricer, so let's define a 'parameters' class for linear functions. This will take two coefficients a and b and our parameter will model the function f(x) = ax + b . The integral of f(x) dx is ax^2 + bx because we're trying to find the area under a triangle for the first term and a rectangle for the second. I needed a little help with f(x)^2 dx (thanks Iain!), but here it is:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** Parameter class that models a linear function f(x) -&#62; ax + b *)
class parameter_linear' a b =
object(self)
    inherit parameter
    method integral t1 t2 =
      let integrate_to x = 0.5 *. x *. a *. x +. x *. b in
        integrate_to t2 -. integrate_to t1
    method integral_sq t1 t2 =
        a ** 2.0 *. (t2 ** 3.0 -. t1 ** 3.0) +.
        a *. b *. (t2 ** 2.0 -. t1 ** 1.0) +.
        b ** 2.0 *. (t2 -. t1)
end;;

class parameter_linear a b = (parameter_linear' a b : parameter_type);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This works fine, but what we really want is
<a href="http://archive.today/o/uiYDs/mathforum.org/library/drmath/sets/select/dm_piecewise.html" target="_blank">piecewise functions</a>
and piecewise constants. These give us the ability to have parameters that we can calibrate to observable data:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** For piecewise constants and piecewise linear functions a "piece" is a
* parameter that applies between low and high limits. *)
type piece = Piece of float * float * parameter_type;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is what we are going to use to make the pieces of our piecewise functions- a tuple of low and high limits, and a parameter object that can give us the integrals in these limits. Integrating the piecewise function then becomes walking the list of pieces and integrating everything that is in the region we are interested in.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** Class for piecewise parameters.  Takes a list of pieces which each
* specify the limits and the linear or const parameter in each region. 
*
* At present, does no checking that the pieces are continuous and not
* overlapping *)
class parameter_piecewise' pieces =
  (* there's probably a better way of doing this, but anyway...
   * Apply a function to each piece, with the parameters being the part of
   * the interval from t1 to t2 that is inside the interval of the piece *)
  let visit_pieces pieces fn t1 t2 = 
      let visit_piece piece low high =
        if (low &#62; t2 || high &#60; t1) then
          0.0
        else 
            let range_start = max t1 low in
            let range_end = min t2 high in
            (fn piece) range_start range_end in
      let rec visit_list so_far lis =
        match lis with
            [] -&#62; so_far (** we're done *)
          | Piece(low, high, p) :: rest -&#62; visit_list (so_far +. (visit_piece p low high)) rest
      in  
        visit_list 0.0 pieces
  in         
object(self)
    inherit parameter
    method integral t1 t2 = visit_pieces pieces (fun x-&#62;x#integral) t1 t2
    method integral_sq t1 t2 = visit_pieces pieces (fun x-&#62;x#integral_sq) t1 t2
end;;

(** Piecewise parameters class with implementation hidden *)
class parameter_piecewise x = (parameter_piecewise' x : parameter_type);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">As you can see, I have a local visitor function which walks the list of pieces and calls the right method on each one. I do this using a nifty little tail-recursive pattern-matcher. This works but I am a bit dissatisfied with the way I have to trick visit_pieces into calling the integral or integral_sq methods. There is a better way I'm sure- I just don't know what it is yet.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I could leave this implementation and it would be functionally-complete, but it would be a bit of a pain to build the piecewise functions, so I make a couple of little helper functions:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** helper funcs to make parts of a piecewise function *)
let make_const_piece low high x = Piece(low, high, new parameter_const x);;
let make_linear_piece low high a b = Piece(low, high, new parameter_linear a b);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">They're still not ideal- I would like to give a list of 2-tuples specifying the upper bound and a point for each piece, and have the function return the piecewise function or constant that "join the dots", but anyway this gives us the ability to make lists of pieces by doing this sort of thing:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(* price one option and print the result  *)
let print_mc ?(num_paths=100000) label payoff =
    let pieces = [
        Param.make_const_piece 0.0 0.25 0.35;
        Param.make_const_piece 0.25 1.0 0.25;
    ] in
    let vol=new Param.parameter_piecewise pieces in
    let mc payoff =
        Mc.sim
            ~payoff:payoff
            ~expiry:0.25
            ~spot:1.613
            ~vol:vol 
            ~r:(new Param.parameter_const 0.055)
            ~num_paths:num_paths
         in
    Printf.printf "%s: %f\n" label (mc payoff)
;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Note that our piecewise const parameter doesn't require the function to be continuous. Given this vol function, we can price as before.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_classes_2" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-21T06:30:35Z</div>
</div>
<div title="Ocaml objects part 1" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_classes" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Ocaml objects part 1</a></h2>
<div style="text-align:left;font-style:italic;">Writing some objects in ocaml, we begin to make the pricer more flexible</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The next in the somewhat haphazard series that began
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_finance.mrk" target="_blank">here</a>
in which I learn a bit about ocaml objects, and in so doing, also learn why Joshi proposes a parameter's class and how to calculate simple integrals.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The purpose of this exercise was to learn how to do object-oriented programming in ocaml, so I pick up where Joshi suggests modifying the Monte Carlo simulator to take "parameters" objects instead of floats for vol and rates. The purpose of this modification is that ultimately we will then be able to use functions as parameters to our models, rather than just constants. I begin by defining the interface to these "parameter" classes. This will define what these parameter objects can do.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** interface for all parameter classes. Users of parameter classes expect
* this interface *)
class type parameter_type =
object
    method integral :       float -&#62; float -&#62; float
    method integral_sq :    float -&#62; float -&#62; float
    method mean :           float -&#62; float -&#62; float
    method root_mean_sq :   float -&#62; float -&#62; float
end;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is a direct translation of Joshi's interface. I'm not 100% sure we really need this, but it does mean that differences between various parameters classes and their private members can be hidden behind this interface.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So given that, we can adapt the mc:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(* Price an option with a flexible payoff using Monte Carlo. 
*
* Use 'parameters' objects for vol and rates to allow passing flexible
* parameters *)
let sim ~payoff ~expiry ~spot ~vol ~r ~num_paths =
    let variance = vol#integral_sq 0.0 expiry in
    let root_variance = sqrt variance in
    let ito_correction = -0.5 *. variance in
    let integral_r = r#integral 0.0 expiry in
    let moved_spot = spot *. exp (integral_r +. ito_correction) in
    let rec do_path i running_sum =
        if i &#60; num_paths then begin
            let this_gaussian = Gaussian.get_one_gaussian () in
            let this_spot = moved_spot *. (exp (root_variance *. this_gaussian)) in
            let this_payoff = payoff ~spot:this_spot in
            do_path (i+1) (running_sum +. this_payoff)
        end
        else (running_sum /. (float_of_int num_paths)) *. (exp (-1.0 *. integral_r))
    in
    do_path 0 0.0
    ;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">as you can see, the difference here is that we are calling the "integral_sq" method on the vol parameter, and the "integral" method on the rates parameter. If we put this into the toploop the type has changed to:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">val sim :
  payoff:(spot:float -&#62; float) -&#62;
  expiry:'a -&#62;
  spot:float -&#62;
  vol:&#60; integral_sq : float -&#62; 'a -&#62; float; .. &#62; -&#62;
  r:&#60; integral : float -&#62; 'a -&#62; float; .. &#62; -&#62; num_paths:int -&#62; float = &#60;fun&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So vol and r are params which have an integral and integral_sq method, which have two arguments, and return a float in each case. We could get rid of the polymorphic argument by explicitly specifying the type of the expiry argument, but I'm not sure how to do that for named args.
<code style="font-size:85%;">~expiry:float</code>
gives a syntax error anyway- I suppose I could write an explicit sig for the function but it works without it.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now we can write the base parameters class. This is an abstract class- derived classes will specify how to take the integral and the integral of the square. In this mc model we don't use the concrete methods of this class but presumably they come in handy later.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** base class specifying the mean and root_mean_sq methods in terms of
  * the integral and integral_sq, but don't define those.  This allows us
  * to define them for any type of parameter *)
class virtual parameter =
object(self)
    method virtual integral :       float -&#62; float -&#62; float
    method virtual integral_sq :    float -&#62; float -&#62; float
    method mean t1 t2 = (self#integral t1 t2) /. (t2 -. t1)
    method root_mean_sq t1 t2 = (self#integral_sq t1 t2) /. (t2 -. t1)
end;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now it's simplicity itself to write our first class, which models a constant parameter:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** class for constant parameters.  This class will be hidden behind the
* parameter_type interface *)
class parameter_const' x =
object(self)
    inherit parameter
    val x_sq = x*.x
    method integral t1 t2 = (t2-.t1) *. x;
    method integral_sq t1 t2 = (t2-.t1) *. x_sq;
end;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I add an alias to this (without the tick), which hides the implementation behind the parameter_type interface:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** Constant parameters class with implementation hidden *)
class parameter_const x = (parameter_const' x : parameter_type);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The type of
<code style="font-size:85%;">parameter_const'</code>
is </div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">class parameter_const' :
  float -&#62;
  object
    val x_sq : float
    method integral : float -&#62; float -&#62; float
    method integral_sq : float -&#62; float -&#62; float
    method mean : float -&#62; float -&#62; float
    method root_mean_sq : float -&#62; float -&#62; float
  end
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">whereas the type of
<code style="font-size:85%;">parameter_const</code>
is </div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">class parameter_const : float -&#62; parameter_type
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...which seems to express the idea of the class much better.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">At this point we can run our Monte-Carlo using constant parameters by doing this sort of thing:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">    let mc payoff =
        Mc.sim
            ~payoff:payoff
            ~expiry:0.25
            ~spot:1.613
            ~vol:(new Param.parameter_const 0.35)
            ~r:(new Param.parameter_const 0.055)
            ~num_paths:num_paths
;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">If you're thinking "so what? That's no better than what we had before except probably a bit slower and certainly harder to read", then I am sympathetic to this point of view.
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_classes_2.mrk" target="_blank">Next</a>
we look at other parameters classes and suddenly it starts to become useful.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_classes" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-19T19:36:27Z</div>
</div>
<div title="Testing for put/call parity" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/put_call_parity" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Testing for put/call parity</a></h2>
<div style="text-align:left;font-style:italic;">Now let's check the prices from the ocaml Monte-Carlo pricer against the most obvious arbitrage relationship</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;"><a href="http://archive.today/o/uiYDs/www.investopedia.com/articles/optioninvestor/05/011905.asp" target="_blank">Put call parity</a>
is an important relationship in options pricing. Let's test our prices to see if they obey this relationship.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">To do so I add a simple helper function to payoff.ml to get the npv of some future cash:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(* get the net present value of some amount *)
let npv ~amt ~rate ~time = amt *. exp(-1.0 *. rate *. time);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and the tests themselves. Note that the put/call parity relationship for digitals is slightly different:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let assert_nearly ?(tolerance = 0.001) label a b =
    Printf.printf "Test %s - a: %f b: %f\n" label a b;
    assert( abs_float(a-.b) &#60;tolerance );;

let spot = 1.613 in
let expiry = 0.25 in
let r = 0.055 in
let strike = 1.600 in
let discount x = Payoff.npv ~rate:r ~time:expiry ~amt:x in
let mc payoff =
    Mc1c.sim
        ~payoff:payoff
        ~expiry:expiry
        ~spot:spot
        ~vol:0.35
        ~r:r
        ~num_paths:100000 in
let price payoff = mc (payoff ~strike:strike) in
assert_nearly
    "Put call parity"
    ((price Payoff.call) +. (discount strike))
    ((price Payoff.put) +. spot);
assert_nearly
    ~tolerance:0.01
    "Digital put/digital call parity"
    ((price Payoff.digital_put) +. (price Payoff.digital_call))
    (discount 1.0)
;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Here's the output:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">Test Put call parity - a: 1.707748 b: 1.708199
Test Digital put/digital call parity - a: 0.982665 b: 0.986344
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Trebles all round! The prices are ok. It's also interesting that ocaml is actually even faster than I thought. I was running bytecode and if you use ocamlopt to create native code my examples run about five times faster.
</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/put_call_parity" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-13T15:59:36Z</div>
</div>
<div title="Using Ocaml in Practice" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/practical_ocaml" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Using Ocaml in Practice</a></h2>
<div style="text-align:left;font-style:italic;">Starting to learn how to make ocaml programs that are not just toys, and extending the derivatives pricer further</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">My experience learning ocaml has been pretty enjoyable so far. A friend told me about Jason Hickey's pdf book
<a href="http://archive.today/o/uiYDs/www.cs.caltech.edu/courses/cs134/cs134b/book.pdf" target="_blank">Introduction to the Objective Caml Programming Language</a>
which is commendably brief and has really helped as I go on to try ocaml further. The second thing that has helped is that I have discovered <a href="http://archive.today/o/uiYDs/utopia.knoware.nl/~hlub/uck/rlwrap/" target="_blank">rlwrap</a>, so the toploop is no longer such an unfriendly place to be.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Furthermore, I have split the pricer that I
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_deriv_1.mrk" target="_blank">began</a>
developing yesterday into a number of files and build them into a single executable using <code style="font-size:85%;">ocamlc</code>. First,
<code style="font-size:85%;">gaussian.ml</code>, containing the random number functions:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">open Random;;

(* initialize the random number generator *)
Random.self_init;;

(* get a random gaussian using a Box-Muller transform, described
 * here http://en.wikipedia.org/wiki/Box-Muller_transform *)
let rec get_one_gaussian_by_box_muller () =
    (* Generate two uniform numbers from -1 to 1 *)
    let x = Random.float 2.0 -. 1.0 in
    let y = Random.float 2.0 -. 1.0 in
    let s = x*.x +. y*.y in
    if s &#62; 1.0 then get_one_gaussian_by_box_muller ()
    else x *. sqrt (-2.0 *. (log s) /. s)
    ;;

(* get a gaussian through oversampling and subtraction *)
let get_one_gaussian_by_summation () =
    let rec add_one limit count so_far =
        if count==limit then so_far
        else add_one limit (count+1) (so_far +. (Random.float 1.0)) in
    (add_one 12 0 0.0) -. 6.0
    ;;

let get_one_gaussian = get_one_gaussian_by_box_muller
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I added the summation method because when I first tried the pricer on real data the numbers were hopeless (now they are just somewhat out of line with market observables), and I suspected a bug in my random numbers. I was correct, I did have incorrect random numbers.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Then I have
<code style="font-size:85%;">payoff.ml</code>, containing my payoff functions. I have added a few more simple payoffs, and moved to named function arguments:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** a vanilla option pays off the difference between the spot price
 ** and the strike, or expires worthless *)
let call ~strike ~spot = max (spot -. strike) 0.0;;
let put ~strike ~spot = max (strike -. spot) 0.0;;

let digital payoff = if payoff&#62; 0.0 then 1.0 else 0.0;;
let digital_call ~strike ~spot = digital (call ~strike:strike ~spot:spot);;
let digital_put ~strike ~spot = digital (put ~strike:strike ~spot:spot);;

(** A double digital pays 1 if spot is between two barriers, zero
 ** otherwise *)
let double_digital ~low ~high ~spot =
    assert (low &#60; high);
    if (low &#60;= spot &#38;&#38; spot &#60;= high) then 1.0
    else 0.0;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;"><code style="font-size:85%;">mc1c.ml</code>
contains the actual Monte Carlo simulator, and it is unchanged except to use named function arguments, and to qualify the name of the get_one_gaussian function, which is now in a seperate file:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(* Price an option with a flexible payoff using Monte Carlo. *)
let sim ~payoff ~expiry ~spot ~vol ~r ~num_paths =
    let variance = vol *. vol *. expiry in
    let root_variance = sqrt variance in
    let ito_correction = -0.5 *. variance in
    let moved_spot = spot *. exp (r *. expiry +. ito_correction) in
    let rec do_path i running_sum =
        if i &#60; num_paths then begin
            let this_gaussian = Gaussian.get_one_gaussian () in
            let this_spot = moved_spot *. (exp (root_variance *. this_gaussian)) in
            let this_payoff = payoff ~spot:this_spot in
            do_path (i+1) (running_sum +. this_payoff)
        end
        else (running_sum /. (float_of_int num_paths)) *. (exp (-1.0 *. r *. expiry))
    in
    do_path 0 0.0
    ;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Finally I have my test file which runs the test cases. Now that I use named function args I can partially-apply function args in any order, so I make a test harness that sets up a particular marketdata scenario and runs the pricer:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let print_mc ?(num_paths=100000) label payoff =
    let mc payoff =
        Mc1c.sim
            ~payoff:payoff
            ~expiry:0.2
            ~spot:161.3
            ~vol:0.35
            ~r:0.045
            ~num_paths:num_paths
         in
    Printf.printf "%s: %f\n" label (mc payoff)
;;

print_mc "call" (Payoff.call ~strike:160.0);;
print_mc "digital call" (Payoff.digital_call ~strike:160.0);;
print_mc "put" (Payoff.put ~strike:170.0);;
print_mc "digital put" (Payoff.digital_put ~strike:170.0);;
print_mc "double digital" (Payoff.double_digital ~low:160.0 ~high:170.0) ~num_paths:250000;;

(* price one option, test the payoff against a target price and 
 * print the result  *)
let test_mc ?(num_paths=1000) ?(expiry=1.0) ?(r=0.0) label payoff target =
    let mc payoff =
        Mc1c.sim
            ~payoff:payoff
            ~expiry:expiry
            ~spot:161.3
            ~vol:0.35
            ~r:r
            ~num_paths:num_paths
         in
    let price = mc payoff in
    let tolerance = 0.00001 in
    Printf.printf "Test %s - price: %f target: %f\n" label price target;
    assert( abs_float(price-.target) &#60; tolerance )
;;

test_mc "Spot to one" (fun ~spot-&#62;1.0) 1.0;;
test_mc "Spot to zero" (fun ~spot-&#62;0.0) 0.0;;
let r = 0.05 in
let npv =  exp(-1.0 *. r) in
    test_mc "Spot to one with rates" (fun ~spot-&#62;1.0) npv ~r:r;;

(* vim: set sw=4 ts=4 expandtab: *)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is pretty cool. As you can see, I made the number of mc paths an optional parameter. I have added a few assertions that trivial payoff functions price correctly and that discounting works.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now I build an object from each ml file using ocamlc and then compile them all to a built object at the end. You need to be careful to do them all in the correct order where you have functions defined in one file, called in another, as we have here.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/practical_ocaml" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-13T06:41:39Z</div>
</div>
<div title="Partial Function Application is not Currying" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/not_currying" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Partial Function Application is not Currying</a></h2>
<div style="text-align:left;font-style:italic;">These two related concepts are often confused. Until yesterday I thought they were the same thing myself.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Often you will see in computer books and articles a pattern where a function is applied to some but not all of it's required arguments, resulting in a function of fewer arguments. In python, this looks like this (from
<a href="http://archive.today/o/uiYDs/www.python.org/dev/peps/pep-0309/" target="_blank">PEP 309</a>):</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">def papply(fn, *cargs, **ckwargs):
    def call_fn(*fargs, **fkwargs):
        d = ckwargs.copy()
        d.update(fkwargs)
        return fn(*(cargs + fargs), **d)
    return call_fn
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is called "partial function application" - it returns a function which acts like the function you pass in but which takes fewer arguments, the others having been "bound in". The author of this code, however, had the (very common) misconception that this is
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Currying" target="_blank">currying</a>, and called his function "curry" as a result. I shared this misconception for some time, and thought that currying and partial application were the same thing. In fact they are to certain extent opposites.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Where partial application takes a function and from it builds a function which takes fewer arguments, currying builds functions which take multiple arguments by composition of functions which each take a single argument. Thus we curry in python like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">def addN(n):
    return lambda x: x + n

def plus(a, b):
    addA=addN(a)
    return addA(b)
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now why would we ever want to do that? Well, in some pure functional languages this is exactly how functions with multiple arguments are built up. In ocaml, a function which takes two ints and returns a float is actually a function which takes an int and returns a function which takes an int and returns a float. In this world, partial application just happens without any extra code:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% rlwrap ocaml
    Objective Caml version 3.09.3

# let add a b=a+b;;
val add : int -&#62; int -&#62; int = &#60;fun&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So the type of
<code style="font-size:85%;">add</code>
is a function which takes an int and returns a function which takes an int and returns an int.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;"># let add2=add 2;; 
val add2 : int -&#62; int = &#60;fun&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;"><code style="font-size:85%;">add</code>
is a curried function, so here we can partially apply by just calling with a single arg- it returns the function that takes the other arg and returns the result.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;"># add2 34;;
- : int = 36
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and we can call
<code style="font-size:85%;">add2</code>
with a single argument as you would expect. Because ocaml curries <code style="font-size:85%;">add</code>
for us, the function has been partially applied. It's interesting to note that in ocaml if you label your function arguments, they can be partially applied in any order.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/not_currying" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-07T08:53:30Z</div>
</div>
<div title="Derivatives pricing in ocaml Part 2" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_deriv_2" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Derivatives pricing in ocaml Part 2</a></h2>
<div style="text-align:left;font-style:italic;">Extending the basic mc pricer to handle different payoffs, we see how partial function application works</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is the third article in a series on using functional programming for financial applications which started
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_finance.mrk" target="_blank">here</a>.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So given our
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_deriv_1.mrk" target="_blank">first</a>
Monte Carlo simulator, and the <a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_finance.mrk" target="_blank">payoff functions</a>
that we started with, it's easy to see how we extend the pricer to handle Joshi's first question at the end of chapter 1 (to price puts):</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(* mc1b.ml - A rudimentary option pricer to answer the exercises at the
 * end of chapter 1 in Joshi.
 *
 * Written by Sean Hunter &#60;sean@uncarved.com&#62;
 *
 * This is demonstration code only.  You are free to use it under the
 * terms of the Creative Commons Attribution 2.5 license, but don't
 * expect it to accurately price real options.
 *)
open Random;;
open Printf;;

(* initialize the random number generator *)
Random.self_init;;

(* get a random gaussian using a Box-Muller transform, described
 * here http://en.wikipedia.org/wiki/Box-Muller_transform *)
let rec get_one_gaussian_by_box_muller () =
    (* Generate two uniform numbers from -1 to 1 *)
    let x = Random.float 2.0 -. 1.0 in
    let y = Random.float 2.0 -. 1.0 in
    let s = x*.x +. y*.y in
    if s &#62; 1.0 then get_one_gaussian_by_box_muller ()
    else x *. sqrt (-2.0 *. (log s) /. s)
    ;;

 (* a vanilla option pays off the difference between the spot price
 * and the strike, or expires worthless *)
let put_payoff strike spot =
    max ( strike -. spot ) 0.0;;

let call_payoff strike spot =
    max (spot -. strike ) 0.0;;

(* Price an option with a flexible payoff using Monte Carlo. *)
let simple_monte_carlo_1a payoff expiry strike spot vol r num_paths =
    let variance = vol *. vol *. expiry in
    let root_variance = sqrt variance in
    let ito_correction = -0.5 *. variance in
    let moved_spot = spot *. exp (r *. expiry +. ito_correction) in
    let rec do_path i running_sum =
        if i &#60; num_paths then begin
            let this_gaussian = get_one_gaussian_by_box_muller () in
            let this_spot = moved_spot *. (exp (root_variance *. this_gaussian)) in
            let this_payoff = payoff strike this_spot in
            do_path (i+1) (running_sum +. this_payoff)
        end
        else (running_sum /. (float_of_int num_paths)) *. (exp (-1.0 *. r *. expiry))
    in
    do_path 0 0.0
    ;;

(* price one put and one call option struck at the money *)    
printf "%f\n" (simple_monte_carlo_1a call_payoff 0.025 195.5 195.5 0.20 0.045 100000);;
printf "%f\n" (simple_monte_carlo_1a put_payoff 0.025 195.5 195.5 0.20 0.045 100000);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So we pass a payoff function into the Monte Carlo simulator and call that function for each path. This isn't quite general enough to handle double digitals though. A double digital is an option that pays 1 if the spot is between two barrier prices at expiry and zero otherwise. However, the payoff function here has to take the strike and the spot. This is where one of the great features of functional programming comes in: partial function application. In ocaml, if you call a function that takes 2 parameters, but give it only one, the return type is a function that takes one parameter. Amazingly partial function application is just there by default and there's no need for tedious binders like there are in the STL in C++ for example. This will explain:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% ocaml                                                                                                                          
    Objective Caml version 3.09.3

# let myadd x y=x+y;;
val myadd : int -&#62; int -&#62; int = &#60;fun&#62;
# let add2=myadd 2;;
val add2 : int -&#62; int = &#60;fun&#62;
# add2 5;;
- : int = 7
# add2 16;;
- : int = 18
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So
<code style="font-size:85%;">myadd</code>
adds two numbers, and by calling it with just one (a 2) we create a function that takes one argument and adds two to it. This is exactly what we need for our flexible payoff function. You can think of the partially applied function args as being all the things that are constant on the termsheet of the trade. Our payoff functions remain the same, except we add one for double digitals:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let double_digital_payoff low high spot =
        if (low &#60;= spot &#38;&#38; spot &#60;= high) then 1.0
        else 0.0;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and we change the mc pricer to just call the payoff func with the spot on the current mc path. We will partially-apply any other arguments the payoff functions need when we invoke the pricer:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(* Price an option with a flexible payoff using Monte Carlo. *)
let simple_monte_carlo_1b payoff expiry spot vol r num_paths =
    let variance = vol *. vol *. expiry in
    let root_variance = sqrt variance in
    let ito_correction = -0.5 *. variance in
    let moved_spot = spot *. exp (r *. expiry +. ito_correction) in
    let rec do_path i running_sum =
        if i &#60; num_paths then begin
            let this_gaussian = get_one_gaussian_by_box_muller () in
            let this_spot = moved_spot *. (exp (root_variance *. this_gaussian)) in
            let this_payoff = payoff this_spot in
            do_path (i+1) (running_sum +. this_payoff)
        end
        else (running_sum /. (float_of_int num_paths)) *. (exp (-1.0 *. r *. expiry))
    in
    do_path 0 0.0
    ;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now see how we call this pricer. It's simplicity itself:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">printf "%f\n" (simple_monte_carlo_1b (call_payoff 160.0) 0.2 161.3 0.35 0.045 250000);;
printf "%f\n" (simple_monte_carlo_1b (put_payoff 170.0) 0.2 161.3 0.31 0.045 250000);;
printf "%f\n" (simple_monte_carlo_1b (double_digital_payoff 160.0 170.0) 0.2 161.3 0.29 0.045 250000);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I find this immensely pleasing. I have hardly started learning the language, and yet generalising this code was simplicity itself due to features in the language. Partial function application is available in imperative languages (C++ notably uses it to provide predicates and adaptable functions in the STL), but there is a lot of nasty additional syntax. The way it works so seemlessly in ocaml is terrific.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Its worth coming back to earth a little bit with the observation that the prices that I am seeing from this thing right now don't match those I can observe in the market so I am sure there is some debugging yet to do. I would also like to make the code into a few modules, but I am not sure how you do that in ocaml yet.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_deriv_2" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-06T08:58:44Z</div>
</div>
<div title="Derivatives pricing in ocaml Part 1" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_deriv_1" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Derivatives pricing in ocaml Part 1</a></h2>
<div style="text-align:left;font-style:italic;">Following on from the "Learning Functional Programming" article, we write our first call pricer</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So from the first
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_finance.mrk" target="_blank">article</a>
we move on to write the first Monte Carlo pricer. This is a very close translation of Joshi's implementation in part 1.3 (listings 1.1 to 1.3) except that I don't read the values in from stdin, I just hardcode them.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Writing this was fun, but I am extremely short of sleep so it was actually trickier than I expected. It was made harder by the cryptic error messages that ocaml gives you when things go wrong. These were almost always
<code style="font-size:85%;">This expression has type int but is here used with type float</code>
which means you are passing int arguments to a float operator or function, rather than the other way around.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% ocaml                                                           
    Objective Caml version 3.09.3

# 1 /. 2;;
This expression has type int but is here used with type float
# 1.0 / 2.0;;
This expression has type float but is here used with type int
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I hope that makes it a little clearer. I find it confusing anyway. It's like the error message has been written by someone for whom English is a second language. Perhaps that's the case.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Here's the listing without further ado. On my computer it does a million paths in 13.2 seconds which is pretty decent I think. The ocamlc compiler is fast as lightning too, compiling this to an executable in 0.029 secs on my machine. If I go on learning ocaml I won't be able to go and get coffee while waiting for my code to compile.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">   (* mc1.ml - A rudimentary European call option pricer designed to mimic 
     * listings 1.1 to 1.3 in Joshi.
     *
     * Written by Sean Hunter &#60;sean@uncarved.com&#62;
     *
     * This is demonstration code only.  You are free to use it under the
     * Creative Commons Attribution 2.5 license, but don't expect it to
     * accurately price real options.
     *)
    open Random;;
    open Printf;;

    (* initialize the random number generator *)
    Random.self_init;;

    (* get a random gaussian using a Box-Muller transform, described
     * here http://en.wikipedia.org/wiki/Box-Muller_transform *)
    let rec get_one_gaussian_by_box_muller () =
        (* Generate two uniform numbers from -1 to 1 *)
        let x = Random.float 2.0 -. 1.0 in
        let y = Random.float 2.0 -. 1.0 in
        let s = x*.x +. y*.y in
        if s &#62; 1.0 then get_one_gaussian_by_box_muller ()
        else x *. sqrt (-2.0 *. (log s) /. s)
        ;;

    (* Price a European call using Monte Carlo. 
     * 
     * We pre-compute as much as possible before the simulation, then the 
     * actual mc paths are done as a nested recursive function.  This seems 
     * more idiomatically functional even though ocaml has for loops.
     *
     * It's also good because I couldn't get the other way to work.*)    
    let simple_monte_carlo1 expiry strike spot vol r num_paths =
        let variance = vol *. vol *. expiry in
        let root_variance = sqrt variance in
        let ito_correction = -0.5 *. variance in
        let moved_spot = spot *. exp (r *. expiry +. ito_correction) in
        let rec do_path i running_sum =
            if i &#60; num_paths then begin
                let this_gaussian = get_one_gaussian_by_box_muller () in
                let this_spot = moved_spot *. (exp (root_variance *. this_gaussian)) in
                let this_payoff = max (this_spot -. strike) 0.0 in
                do_path (i+1) (running_sum +. this_payoff)
            end
            else (running_sum /. (float_of_int num_paths)) *. (exp (-1.0 *. r *. expiry))
        in
        do_path 0 0.0
        ;;

    (* price a three-month call option near to the money.
     * we are using 35% vol and 4.5% interest rates*)    
    printf "%f\n" (simple_monte_carlo1 0.2 160.0 161.3 0.35 0.045 250000);;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This, however, is crying out for more flexibility. The first thing to do is to see if we can get it to price other simple payoffs. That's the subject of the
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_deriv_2.mrk" target="_blank">next</a>
article.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_deriv_1" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-06T08:54:54Z</div>
</div>
<div title="Learning Functional Programming" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_finance" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Learning Functional Programming</a></h2>
<div style="text-align:left;font-style:italic;">I decided to teach myself ocaml by writing a derivatives pricer</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I have been interested in functional programming for some time, but finally decided to bite the bullet and learn properly, and that (for me anyway) means writing some code to accomplish a practical task. My idea is to reimplement most of the C++ code in
<a href="http://archive.today/o/uiYDs/www.markjoshi.com/" target="_blank">Mark Joshi's</a>
excellent <a href="http://archive.today/o/uiYDs/www.markjoshi.com/design/index.htm" target="_blank">book</a>
<em>C++ Design Patterns and Derivatives Pricing</em>, but in
<a href="http://archive.today/o/uiYDs/caml.inria.fr/ocaml/index.en.html" target="_blank">ocaml</a>. Now I'm a newcomer to
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Functional_programming" target="_blank">functional programming</a>
and to ocaml, so what I write won't be pretty or idiomatic, especially at first. To begin with I'm learning from the main <a href="http://archive.today/o/uiYDs/www.ocaml-tutorial.org/" target="_blank">tutorial</a>. If I find and use another I'll post that too.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I will try to explain some of the financial stuff that's going on as I do so, but for the full lowdown on why derivatives price the way they do, you need to learn some financial maths. You could do a lot worse that picking up Joshi's
<a href="http://archive.today/o/uiYDs/www.markjoshi.com/concepts/index.htm" target="_blank">other book</a>,
<em>The Concepts and Practice of Mathematical Finance</em>. A lot of people get
<a href="http://archive.today/o/uiYDs/www.amazon.com/Options-Futures-Other-Derivatives-6th/dp/0131499084/ref=pd_bbs_2/104-9802601-8884745?ie=UTF8&amp;amp;s=books&amp;amp;qid=1181022494&amp;amp;sr=1-2" target="_blank">Hull</a>, but I prefer Joshi for a really practical introduction with great explanations of concepts.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So without further ado, here is my first ocaml program, which defines payoffs for vanilla European
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Put_option" target="_blank">put</a>
and <a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Call_option" target="_blank">call</a>
options. In fact Joshi starts off straight away with a <a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Monte_Carlo_method" target="_blank">Monte Carlo</a>
pricer, but my copy is downstairs so I'm straying off-piste here. It's my intention to follow Joshi step by step, and write up each one here as I go.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">    open Printf

    (* a vanilla option pays off the difference between the spot price
     * and the strike, or expires worthless *)
    let put_payoff strike spot=
            max ( strike -. spot ) 0.0;;

    let call_payoff strike spot=
            max (spot -. strike ) 0.0;;

    let print_payoff payoff strike spot=
            let outcome=payoff strike spot in
            printf "%f\n" outcome;;

    print_payoff call_payoff 195.0 190.0;;
    print_payoff call_payoff 195.0 200.0;;
    print_payoff put_payoff 195.0 190.0;;
    print_payoff put_payoff 190.0 195.0;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now I'm running and writing this on
<a href="http://archive.today/o/uiYDs/fedoraproject.org/wiki/" target="_blank">fedora</a>
<a href="http://archive.today/o/uiYDs/www.linux.org/" target="_blank">Linux</a>, and my ocaml is 3.09.3. When I run this I see:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">% ocaml tmp/payoff.ml
5.000000
0.000000
0.000000
5.000000
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Which is what I would expect. Now this is very cheesy at present, but it's a start and we'll improve it in the next
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ocaml_deriv_1.mrk" target="_blank">article</a>. It's worth a couple of observations about this because already this demonstrates a few things that strike me as being interesting about ocaml. For one thing, there isn't any default type promotion or operator overloading, so we need to explicitly qualify our constants with
<code style="font-size:85%;">.0</code>
to get them to be floats. Secondly, we need to use <code style="font-size:85%;">-.</code>
to subtract them. The <code style="font-size:85%;">max</code>
function can operate on any type so it works with floats or ints.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ocaml_finance" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-05T21:08:53Z</div>
</div>
<div title="Public funding of political parties" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/political_funding" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Public funding of political parties</a></h2>
<div style="text-align:left;font-style:italic;">The UK political parties are voting for their own interests by asking for taxpayer funding. Taxpayers should say "no".</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In the light of recent scandals various proposals have been made that would result in political parties in the UK receiving taxpayers' money to fund their activities. This is something that UK taxpayers should fight in the strongest possible terms for two reasons: Firstly, the main political parties stand to benefit hugely from this change- they would no longer need to worry about funding but would simply receive boatloads of cash as of right. This would tend to entrench the political status quo. Secondly, it could only be achieved by raising the tax burden in the UK even higher than it is now or by cutting government expenditure on other things. As all taxes promote economic inefficiency raising the tax burden is a terrible idea. Equally, while cutting government expenditure in general is a good thing, simply replacing one existing form of government waste with another is bad in general and in this case particularly odious.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">How about instead we keep our current system where
<em>people who want political parties to be well-funded get to put their money where their mouth is and fund them</em>? This is good for several reasons: Firstly it is maximally efficient- I spend the amount I want to spend to achieve the political funding outcome I want and nothing is wasted. Secondly, I can't lie- if political funding is so important to me that I want others to pay but I am unwilling to pay myself I get nothing. Thirdly, people who are not interested in sponsoring a political party are not forced against their will to do so. Finally, the overall burden of taxation is not increased, so everyone has more money of their own which they can use to do whatever they want (including donating it to a political party if they want to).</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Making political parties taxpayer-funded won't make politicians immune from accusations of bribery- people who want to seek influence just need to be more subtle, funding party-affiliated organisations or events (this happens extensively now) and bribing politicians personally rather than improperly funding their parties.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/political_funding" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/thoughts" target="_blank">thoughts</a>
</span>
Last updated: 2006-08-02T10:49:31Z</div>
</div>
<div title="My life (and mail) in subversion" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/svn_mail" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">My life (and mail) in subversion</a></h2>
<div style="text-align:left;font-style:italic;">Moving my mail into subversion gives me easy backups and all of my homedir in one place. Here's how I did it.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Inspired by
<a href="http://archive.today/o/uiYDs/www.onlamp.com/pub/a/onlamp/2005/01/06/svn_homedir.html" target="_blank">'Keeping your life in subversion'</a>
For some time now I have been slowly migrating all of my personal home directories into the <a href="http://archive.today/o/uiYDs/subversion.tigris.org/" target="_blank">subversion</a>
version control system and merging back so that I end up with a spartan configuration and everything gets backed up. Fool that I am, however, I want to take things one step further and also keep all of my mail in version control too.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The benefits of keeping mail in a version control system are marginal. Mails are not typically edited after they are received and sent, so a lot of people use a system such as
<a href="http://archive.today/o/uiYDs/www.linuxjournal.com/article/7712" target="_blank">unison</a>
and find it more than adequate. However, since everything else in my homedir is in subversion I wanted the mail in there too. Happily for my purposes this is not too hard.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The first thing is that I wanted a simple script that I can run after I have read or filed my mail that indexes the mail and syncs it to subversion. For indexing, I use
<a href="http://archive.today/o/uiYDs/www.rc0.org.uk/mairix/" target="_blank">mairix</a>, which allows me to create virtual folders and cooperates well with
<a href="http://archive.today/o/uiYDs/www.mutt.org/" target="_blank">mutt</a>, my favourite email client. One possible solution to virtual folders is
<a href="http://archive.today/o/uiYDs/larve.net/people/hugo/2003/scratchpad/VirtualFoldersInMutt.html" target="_blank">here</a>. I decided to do things a little differently, and here's the shell script that does it all for me:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">#!/bin/sh

set -e

TODAY=$( date -Iseconds )
cd "${HOME}/mail"
echo "Updating mail index..."
mairix -p       #add '-v' for more verbosity
echo "Emptying search folder"
rm -rf "${HOME}/mail/mfolder/"{cur,new,tmp}/*
echo "svn syncup"
svn status | awk '/^\?/{print $2}' | xargs -r svn add
svn status | awk '/^!/{print $2}' | xargs -r svn rm
svn ci -m "Mail sync for ${TODAY}"
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Here's my .mairixrc:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">base=/home/sean/mail
maildir=incoming...:sentmail...
mfolder=mfolder
database=/home/sean/mail/mairix_database
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">All that's needed to get it working in Mutt is to add
<code style="font-size:85%;">~/mail/mfolder</code>
to the <code style="font-size:85%;">mailboxes</code>
my .muttrc, and add <code style="font-size:85%;">macro index \e\/ "&#60;shell-escape&#62;mairix " "Run a mairix search"</code>
at the same time. Now, in mutt to do a search I do <code style="font-size:85%;">Escape-/</code>
and type a regex. All of the hits are in ~/mail/mfolder and I change to that like a regular mailbox.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and to keep it all up to date I just run my mailsync script every now and again.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/svn_mail" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-05-18T16:26:32Z</div>
</div>
<div title="Shell Command History and Searching" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/shell_history" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Shell Command History and Searching</a></h2>
<div style="text-align:left;font-style:italic;">Time spent learning how the unix shell works is never wasted</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">One of the easiest ways to improve your productivity on unix systems is to become acquainted with your shell's history completion and search facilities. All of these described here are common to zsh and bash, although zsh has some additional features that bash does not.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Firstly, if you ever find yourself tapping the up arrow to scroll through your command history, you are living in a state of sin- either type
<code style="font-size:85%;">history 100</code>
or something similar to actually get a history list or use Ctrl-R to do a recursive incremental search through your shell history. Secondly, learn and use some basic history completions:</div>
<ul style="text-align:left;">
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!$</code>
completes to the last argument of your previous command. <code style="text-align:left;font-size:85%;">vi file</code>
followed by <code style="text-align:left;font-size:85%;">cvs ci !$</code>
edits a file and checks it in.</li>
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!*</code>
completes to all the arguments of your previous command. <code style="text-align:left;font-size:85%;">vi file1 file2 file{3,4,5}</code>
followed by <code style="text-align:left;font-size:85%;">cvs ci !*</code>
edits a list of files and checks then all in.</li>
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!!</code>
completes to the whole of your previous command, with args. <code style="text-align:left;font-size:85%;">vi /etc/passwd</code>
gives "permission denied? Use <code style="text-align:left;font-size:85%;">sudo !!</code>
to become rootly without retyping. </li>
</ul>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">There are lots more possible history completions but I use those three ten times for any one of them. Also useful are:</div>
<ul style="text-align:left;">
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!something</code>
completes to the whole of the last command I typed that began with "something". So, for example, say I try <code style="text-align:left;font-size:85%;">vi file</code>
and get "permission denied", but I don't yet have "sudo" permission sorted out. I become root, fix my sudoers file, then do <code style="text-align:left;font-size:85%;">sudo !vi</code>
to run the whole of the last vi command as root.</li>
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!somenumber</code>
completes to the whole of a specific numbered command from my history.</li>
</ul>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">You can combine these with the first three constructs by adding a colon, so:</div>
<ul style="text-align:left;">
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!vi:*</code>
is "all the arguments to the last <code style="text-align:left;font-size:85%;">vi</code>
command. Perhaps I have edited some files, then done a <code style="text-align:left;font-size:85%;">make</code>
to see if they build, then I can <code style="text-align:left;font-size:85%;">svn ci !vi:*</code>
to check the changes into subversion.</li>
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!3:$</code>
is the last argument to command number three from my history.</li>
</ul>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/shell_history" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-05-17T07:35:18Z</div>
</div>
<div title="Site-wide RDF metadata" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/metadata" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Site-wide RDF metadata</a></h2>
<div style="text-align:left;font-style:italic;">I decided to add RDF metadata to all these pages. Here's how I did it.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Having recently started a bit of a
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Semantic_Web" title="Explaining the semantic web" target="_blank">semantic web</a>
kick, the next logical step was for me to include <a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Resource_Description_Framework" title="Resource description framework" target="_blank">rdf</a>
metadata for all pages on this site. This is a bit of a hack as xhtml does not support rdf directly so there are several <a href="http://archive.today/o/uiYDs/infomesh.net/2002/rdfinhtml/" title="Approaches to embedding rdf in xhtml" target="_blank">possible ways</a>
to go about including rdf in web pages. I don't really like the <a href="http://archive.today/o/uiYDs/www.intertwingly.net/wiki/pie/RFC2731" title="RFC2731: Embedding DC metadata in html metadata" target="_blank">rfc2731</a>
proposal because while it is html, it's not rdf (or a recognisably sane serialisation of rdf) so I decided to go with a couple of the other approaches. As a result, rdf is embedded in comments in the head of each page and linked from the page also. You can see this if you "view source" on this page.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">All of this site uses cheetah templates, and you can include a file from within a cheetah template and it will be rendered as dynamic content. So getting the "rdf in html comments" to work was just a question of adding this snippet to my templates and writing a metadata.rdf template.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">&#60;!--
    #include "metadata.rdf"
--&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The metadata.rdf template is pretty straightforward too:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">&#60;rdf:RDF xmlns:cc="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&#62;
#if $varExists('article')
    &#60;rdf:Description rdf:about="$back_link"&#62;
        &#60;dc:creator&#62;Sean Hunter&#60;/dc:creator&#62;
        &#60;dc:title&#62;$article.title&#60;/dc:title&#62;
        &#60;dc:description&#62;$article.precis&#60;/dc:description&#62;
        &#60;dc:date&#62;$mtime&#60;/dc:date&#62;
        &#60;dc:type&#62;Text&#60;/dc:type&#62;
        &#60;dc:format&#62;text/html&#60;/dc:format&#62;
        &#60;dc:identifier&#62;http://www.uncarved.com/$article.name&#60;/dc:identifier&#62;
        &#60;dc:language&#62;en-GB&#60;/dc:language&#62;
    &#60;/rdf:Description&#62;
#else
    &#60;rdf:Description rdf:about="$back_link"&#62;
        &#60;dc:creator&#62;Sean Hunter&#60;/dc:creator&#62;
        #if $current_tagname
        &#60;dc:title&#62;The Uncarved Block/$current_tagname&#60;/dc:title&#62;
        &#60;dc:subject&#62;$current_tagname&#60;/dc:subject&#62;
        #else
        &#60;dc:title&#62;The Uncarved Block&#60;/dc:title&#62;
        #end if
        &#60;dc:description&#62;A collection of articles and software&#60;/dc:description&#62;
        &#60;dc:date&#62;$most_recent&#60;/dc:date&#62;
        &#60;dc:type&#62;Text&#60;/dc:type&#62;
        &#60;dc:format&#62;text/html&#60;/dc:format&#62;
        &#60;dc:identifier&#62;http://www.uncarved.com/&#60;/dc:identifier&#62;
        &#60;dc:language&#62;en-GB&#60;/dc:language&#62;
    &#60;/rdf:Description&#62;
#end if
    &#60;cc:Work rdf:about="Web Articles and Software"&#62;
        &#60;cc:license rdf:resource="http://creativecommons.org/licenses/by/2.5/" /&#62;
    &#60;/cc:Work&#62;
    &#60;cc:License rdf:about="http://creativecommons.org/licenses/by/2.5/"&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/Reproduction"/&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/Distribution"/&#62;
        &#60;cc:requires rdf:resource="http://web.resource.org/cc/Notice"/&#62;
        &#60;cc:requires rdf:resource="http://web.resource.org/cc/Attribution"/&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/&#62;
    &#60;/cc:License&#62;
&#60;/rdf:RDF&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The reason for the
<code style="font-size:85%;">#if $varExists('article')</code>
branch is that I wanted a single rdf metadata template that worked for my index pages or my article-on-a-single page page. I tried to be as nerdily comprehensive in the metadata I provide as I could be, although I don't currently look up the subject tag for an article and I probably should. Nevertheless this works quite well and the CreativeCommons license metadata <a href="http://archive.today/o/uiYDs/validator.creativecommons.org/" title="Creative commons license metadata validator" target="_blank">validator</a>
was able to find and parse the rdf within the page so I took that to mean that tools which look for rdf in html comments would be fine. I still wanted "detached" metadata to work, however, so I could get the metadata for a page in a seperate document. To do this, I had to extend my python blog script which drives the site so that I could get a page in "metadata only" mode and it would return the rdf for any page. That's how I produce the <code style="font-size:85%;">&#60;link rel</code>
link in the head of these pages and the "Machine-readable metadata for this page can be found here" link which should be at the bottom of this page.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This approach seems to work although I am still not 100% happy. I would be happier if the
<a href="http://archive.today/o/uiYDs/www.w3.org/RDF/Validator/" title="w3c validator that doesn't like me at the moment" target="_blank">w3c rdf validator</a>
liked my rdf. Currently it will validate if I paste it via direct entry but not if I ask it to fetch a page in metadata-only mode where it gives me an inscrutable <code style="font-size:85%;">An attempt to load the RDF from URI 'http://www.uncarved.com/?meta_only=1' failed. (Undecodable data when reading URI at byte 0 using encoding 'UTF-8'. Please check encoding and encoding declaration of your document.)</code>
Static rdfs seem fine so it must be something to do with the http headers. I thought I had cracked it when I got my script to set the Content-Type to "application/rdf+xml" and it seemed to validate for a while, but I realised that I had mispasted the magic line from my mimetypes file and set the content type to "application/rss+xml" instead. Fixing the Content-Type broke the validation again. If anyone knows how I fix this, please mail me at <a href="mailto:sean@uncarved.com" target="_blank">sean@uncarved.com</a>
as I would love to have it working so I can add "rdf" to my validate boast tags at the bottom of each page.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Actually a day or so on and the w3c validator now likes my metadata. I don't think I've changed anything relevant so maybe they are having problems with their service somehow. I'm going to add a validate rss link now...</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Technorati tags:
<a href="http://archive.today/o/uiYDs/www.technorati.com/tags/rdf" title="Technorati tags for rdf" target="_blank">rdf</a>
<a href="http://archive.today/o/uiYDs/www.technorati.com/tag/semantic%20web" target="_blank">semantic web</a></div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/metadata" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-05-12T09:51:42Z</div>
</div>
<div title="RSS 1.1 Feed now available" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/rss1" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">RSS 1.1 Feed now available</a></h2>
<div style="text-align:left;font-style:italic;">RDF + Syndication = RSS 1</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now that I am getting the hang of rdf, the next logical step was to link metadata with content and provide an
<a href="http://archive.today/o/uiYDs/inamidst.com/rss1.1/" title="RSS 1.1: RDF Site Summary specification" target="_blank">rss 1.1</a>
feed. Rss 1.1 is a fantastic specification in many ways because it allows machine-readable content (it is an application of rdf and xml), and has namespaces that allow content syndication, so you can embed metadata in with articles and include the foaf file and the pgp key of the authors if that's the sort of thing you like. In my RSS 1.1 feed I include the full content of the site with metadata and license information for the full feed and metadata for individual items as appropriate. To see the full end result, click on the rss1.1 link at the bottom of the index page.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Note that rss 2 is not a more recent spec that rss 1.1 (or rss 1)- they are seperate specs for doing a similar thing (content syndication), but the specification
<a href="http://archive.today/o/uiYDs/diveintomark.org/archives/2002/09/06/history_of_the_rss_fork" target="_blank">forked</a>. Rss 2 is considered simpler by it's adherents because it is an application of xml but not of rdf. That, however, is also it's weakness because it's not as extensible and is not seemlessly part of the semantic web. Certainly for any programmer, rss 1 is no more complex than rss 2 to support and implement and is a great deal richer and more extensible.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">For what it's worth, my cheetah template looks like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">#filter Filter
&#60;?xml version="1.0" encoding="utf-8"?&#62;
&#60;Channel xmlns="http://purl.org/net/rss1.1#" 
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:p="http://purl.org/net/rss1.1/payload#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
    xmlns:cc="http://web.resource.org/cc/"
    rdf:about="$self_link"&#62;
    &#60;rdf:Description rdf:about="$self_link"&#62;
        &#60;dc:creator&#62;Sean Hunter&#60;/dc:creator&#62;
        #if $current_tagname
        &#60;dc:title&#62;The Uncarved Block/$current_tagname&#60;/dc:title&#62;
        &#60;dc:subject&#62;$current_tagname&#60;/dc:subject&#62;
        #else
        &#60;dc:title&#62;The Uncarved Block&#60;/dc:title&#62;
        #end if
        &#60;dc:description&#62;A collection of articles and software&#60;/dc:description&#62;
        &#60;dc:date&#62;$most_recent_w3c&#60;/dc:date&#62;
        &#60;dc:type&#62;Text&#60;/dc:type&#62;
        &#60;dc:format&#62;text/html&#60;/dc:format&#62;
        &#60;dc:identifier&#62;$self_link&#60;/dc:identifier&#62;
        &#60;dc:language&#62;en-GB&#60;/dc:language&#62;
    &#60;/rdf:Description&#62;
    &#60;cc:Work rdf:about="$self_link"&#62;
        &#60;cc:license rdf:resource="http://creativecommons.org/licenses/by/2.5/" /&#62;
    &#60;/cc:Work&#62;
    &#60;cc:License rdf:about="http://creativecommons.org/licenses/by/2.5/"&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/Reproduction"/&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/Distribution"/&#62;
        &#60;cc:requires rdf:resource="http://web.resource.org/cc/Notice"/&#62;
        &#60;cc:requires rdf:resource="http://web.resource.org/cc/Attribution"/&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/&#62;
    &#60;/cc:License&#62;
    #if $current_tagname
    &#60;title&#62;The Uncarved Block/$current_tagname&#60;/title&#62; 
    #else
    &#60;title&#62;The Uncarved Block&#60;/title&#62; 
    #end if
    &#60;description xml:lang="en-GB"&#62;Software, unix tips and sundry other things&#60;/description&#62;
    &#60;link&#62;$home_link&#60;/link&#62;
    &#60;items rdf:parseType="daml:collection"&#62;
        #for $article in $articles
        &#60;item rdf:about="http://www.uncarved.com/$article.name"&#62;
            &#60;title&#62;$article.title&#60;/title&#62;
            &#60;link&#62;http://www.uncarved.com/$article.name&#60;/link&#62;
            #if $article.precis
            &#60;description xml:lang="en-GB"&#62;$article.precis&#60;/description&#62;
            #end if
            &#60;dc:date&#62;$article.updated&#60;/dc:date&#62;
            &#60;p:payload rdf:parseType="Literal"&#62;
                $article.body
            &#60;/p:payload&#62;
        &#60;/item&#62;
        #end for
    &#60;/items&#62;
&#60;/Channel&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The feed is available
<a href="http://archive.today/o/uiYDs/www.uncarved.com/rss1.1.xml" target="_blank">here</a>
and the output for a tag with just this article in it (I've truncated the content slightly) looks like:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">&#60;?xml version="1.0" encoding="utf-8"?&#62;
&#60;Channel xmlns="http://purl.org/net/rss1.1#" 
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:p="http://purl.org/net/rss1.1/payload#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
    xmlns:cc="http://web.resource.org/cc/"
    rdf:about="http://www.uncarved.com/index.py/rss1.1.xml?limit=1"&#62;
    &#60;rdf:Description rdf:about="http://www.uncarved.com/index.py/rss1.1.xml?limit=1"&#62;
        &#60;dc:creator&#62;Sean Hunter&#60;/dc:creator&#62;
        &#60;dc:title&#62;The Uncarved Block&#60;/dc:title&#62;
        &#60;dc:description&#62;A collection of articles and software&#60;/dc:description&#62;
        &#60;dc:date&#62;2006-05-11T13:32:57Z&#60;/dc:date&#62;
        &#60;dc:type&#62;Text&#60;/dc:type&#62;
        &#60;dc:format&#62;text/html&#60;/dc:format&#62;
        &#60;dc:identifier&#62;http://www.uncarved.com/index.py/rss1.1.xml?limit=1&#60;/dc:identifier&#62;
        &#60;dc:language&#62;en-GB&#60;/dc:language&#62;
    &#60;/rdf:Description&#62;
    &#60;cc:Work rdf:about="http://www.uncarved.com/index.py/rss1.1.xml?limit=1"&#62;
        &#60;cc:license rdf:resource="http://creativecommons.org/licenses/by/2.5/" /&#62;
    &#60;/cc:Work&#62;
    &#60;cc:License rdf:about="http://creativecommons.org/licenses/by/2.5/"&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/Reproduction"/&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/Distribution"/&#62;
        &#60;cc:requires rdf:resource="http://web.resource.org/cc/Notice"/&#62;
        &#60;cc:requires rdf:resource="http://web.resource.org/cc/Attribution"/&#62;
        &#60;cc:permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/&#62;
    &#60;/cc:License&#62;
    &#60;title&#62;The Uncarved Block&#60;/title&#62; 
    &#60;description xml:lang="en-GB"&#62;Software, unix tips and sundry other things&#60;/description&#62;
    &#60;link&#62;http://www.uncarved.com/index.py/&#60;/link&#62;
    &#60;items rdf:parseType="daml:collection"&#62;
        &#60;item rdf:about="http://www.uncarved.com/blog/rss1.mrk"&#62;
            &#60;title&#62;RSS 1.1 Feed now available&#60;/title&#62;
            &#60;link&#62;http://www.uncarved.com/blog/rss1.mrk&#60;/link&#62;
            &#60;description xml:lang="en-GB"&#62;RDF + Syndication = RSS 1&#60;/description&#62;
            &#60;dc:date&#62;2006-05-11T13:08:47Z&#60;/dc:date&#62;
            &#60;p:payload rdf:parseType="Literal"&#62;

&#60;p&#62;Now that I am getting the hang of rdf, the next logical step was to link metadata with content ... You can find out more on the &#60;a href="http://en.wikipedia.org/wiki/RSS_%28file_format%29"&#62;wikipedia&#60;/a&#62;.  &#60;br /&#62; 
&#60;/p&#62;
            &#60;/p:payload&#62;
        &#60;/item&#62;
    &#60;/items&#62;
&#60;/Channel&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I hope you enjoy creating your own rss 1.1 feeds. You can find out more about all the site syndication variants on the
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/RSS_%28file_format%29" target="_blank">wikipedia</a>.
</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/rss1" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-05-11T19:32:31Z</div>
</div>
<div title="The Crying of Lot 49" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/lot49" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">The Crying of Lot 49</a></h2>
<div style="text-align:left;font-style:italic;">A review of "The Crying of Lot 49" by Thomas Pynchon</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">About a year ago, when I had just just read and enjoyed
<a href="http://archive.today/o/uiYDs/isbn.nu/0802135854" title="price check on stone junction" target="_blank">Stone Junction: An Alchemical Potboiler</a>
by Jim Dodge, a friend who has very similar taste in novels to me recommended that I read some Thomas Pynchon. This surprised me for two reasons. Firstly, I had (I am now ashamed to admit) always assumed without evidence that people who read Pynchon (and by extension, the man himself) were hopeless pseuds and that the experience of reading his work would thus be a disappointing one. Secondly, the only thing I had really heard about Pynchon was the supposedly fiendish complexity of his style and hearing that his books might be similar to the easy, fun narrative riffs of Jim Dodge seemed perculiar. In actual practise, I would say on refection that "The Crying of Lot 49" and "Vineland" are more like Jim Dodge, and "V" and "Gravity's Rainbow" are altogether darker and more troublesome. "Slow Learner" and "Mason and Dixon" form the final category, namely "Pynchon I haven't read yet".</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So I embarked (with my trepidation tempered somewhat by the shortness of the novel) on "The Crying of Lot 49", and found (of course) that I was wrong and that Pynchon is exactly my sort of author. Funny, thoughtful and compassionate, he is capable of a staggering range and has an incredible dexterity with language and plot. His books are rich in allusion, but wear their erudition lightly, so where I was able to spot and decipher additional subtexts, they added something, but I never felt as if I was being presented merely with an exposition of the author's cleverness and research. If that makes me a pseud, then I am proud to be so.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I would strongly recommend that anyone who is the least bit curious about Pynchon start reading with "The Crying of Lot 49". It's tremendous fun to read and you'll never feel quite the same about waste bins again.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;"><a href="b8691022ffb120b175790eaa78bddfb36571ff71.png" social="yes" target="_blank" style="cursor:zoom-in"><img alt="Muted Post Horn" src="b8691022ffb120b175790eaa78bddfb36571ff71.png" title="Muted post horn image courtesy of the wikipedia"/></a></div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/lot49" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/reviews" target="_blank">reviews</a>
</span>
Last updated: 2006-05-11T15:14:22Z</div>
</div>
<div title="Undercover Economist" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/reviews" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Undercover Economist</a></h2>
<div style="text-align:left;font-style:italic;">A review of "The Undercover Economist" by Tim Harford
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Inspired by my friend
<a href="http://archive.today/o/uiYDs/www.schlaikjer.net/" target="_blank">Erich Schlaikjer</a>, I intend to write some reviews of books and music and put them up here, so I'll start with the book I have just finished, which is "The Undercover Economist" by
<a href="http://archive.today/o/uiYDs/www.timharford.com/" target="_blank">Tim Harford</a>.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This book is an entertaining and thought-provoking exposition of some key principles of economics and how they interact with big questions (such as "Why are rich companies rich and poor companies poor?"), small questions (such as "Why does my morning coffee cost as much as it does?") and all sizes in between. In that respect, it grows out of the author's "Dear Economist" column in the weekend
<a href="http://archive.today/o/uiYDs/www.uncarved.com/" target="_blank">ft</a>, in which he offers often amusing "agony-aunt" style advice using the principles of economics to shine a light into normal everyday activities and moral dilemmas. The same mix of clear, reasoned argument and amusing and thought-provoking style is in evidence in this book.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">All of the economics is explained and argued in a way that someone (such as myself) who has interest but little understanding in this field can easily follow, and there are references at the back to academic papers and journalism that back up the author's points and provide a starting-point for additional reading.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">As another entry in the growing field of "popular economics" books, and with it's ostensibly similar promise of using economics to shine a new light onto everyday things this book is bound to provoke comparisons with "<a href="http://archive.today/o/uiYDs/www.freakonomics.com/" target="_blank">Freakonomics</a>", but both books are worth reading in their own right and there is very little that is covered in both. Actually I enjoyed "The Undercover Economist" more, not least because it lacked the selfcongratulatory sections of Freakonomics that annoyed me so. (That book has sections that are just one of the authors telling you how clever and amazing the other author is- I don't want someone to tell me they are clever, I want them to show me!). It is also more deeply thought-provoking for being less willfully controversial.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/reviews" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/reviews" target="_blank">reviews</a>
</span>
Last updated: 2006-05-11T07:48:25Z</div>
</div>
<div title="Getting Things Done in Text with notation3" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/gtd_in_n3" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Getting Things Done in Text with notation3</a></h2>
<div style="text-align:left;font-style:italic;">I want a simple means of tracking and grouping tasks that works in text form and is easily parseable. And I want to learn notation3 too...</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Inspired by
<a href="http://archive.today/o/uiYDs/www.lifehacker.com/software/text/geek-to-live-list-your-life-in-txt-166299.php" target="_blank">this</a>
article on lifehacker I decided to make my own "getting things done" toolset. It would ideally need to be just as flexible from the commandline as the lifehack "todo.txt" file but have machine readablility too. I have decided to use <a href="http://archive.today/o/uiYDs/www.w3.org/2000/10/swap/Primer" target="_blank">notation3</a>
as the basic format. n3 is useful because it is a machine-parseable format that is easily converted into xml, but it's not as tedious to write as xml can often be. So far it looks as if I will be able to make a "one line per item" file that meets all of the "getting things done in txt" requirements but will also be able to be used online and via the semantic web toolset. I will be updating this article as I go along, not least because n3 is entirely new to me and I am bound to change things as I go along. </div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So far, the document looks something like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">@prefix : &#60;#&#62; .
:tidy_garden :contexts "@home" ; :next_action "Mow lawn" ; :all_actions "Mow lawn" , "Weed borders" , "Turn compost" , "Prune" , "Tidy front garden" ; :priority 2 .
:sort_finances :contexts "@home" , "@work" ; :next_action "Consolidate pensions" ; :all_actions "Consolidate pensions" , "ebay junk", "make budget" ; :priority 1 .
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">As you can see, for each item, I can list the contexts in which it can take place, the next action and all the actions I have thought of for that item so far. For the next actions at the moment I am just using string literals, but I will soon change those into ":" labels so I can join the tasks together in a graph and have some tasks dependant on others. In n3 you can make rules and draw inferences so I could have it figure out for me what I should be doing next. Since the output is
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Resource_Description_Framework" target="_blank">rdf</a>
I could make a full ontology for tasks etc and then as well as having a tool for humans, I would have a machine-readable format for this stuff that would fit into the <a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Semantic_Web" target="_blank">semantic web</a>. I may do that.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">To get going with notation3, you need a computer with
<a href="http://archive.today/o/uiYDs/www.python.org/" target="_blank">python</a>
and you need to install <a href="http://archive.today/o/uiYDs/rdflib.net/" target="_blank">rdflib</a>
and <a href="http://archive.today/o/uiYDs/www.w3.org/2000/10/swap/doc/cwm.html" title="Tim Berners-Lee's program for manipulating rdf" target="_blank">cwm</a>. It's well worth the effort to do this.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/gtd_in_n3" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-05-10T04:44:53Z</div>
</div>
<div title="Should Payment be by Effort or Results?" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/pay_by_results" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Should Payment be by Effort or Results?</a></h2>
<div style="text-align:left;font-style:italic;">Some companies and systems seek to pay people by effort, rather than by the results they achieve.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The first computer job I got when I moved to London was as a "Database operator" at a small, family owned company which supplied scientific equipment. They didn't make the equipment themselves, they were wholesalers. My predecessor in the job was leaving to travel the world and spent his last couple of weeks showing me the job, which entailed producing reports that the marketing manager could use to target specific products at the appropriate customers. The data came from an old Siemens/Nixdorf mainframe computer which ran the customer sales and invoicing system for the business, so the job involved importing the data onto a PC and producing reports using a spreadsheet package.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Every month my predecessor got the two floppy disks worth of data from the mainframe and spent about a week and a half importing the information into a Paradox database on the PC. The import procedure involved running a series of buggy QBasic programs (written for us by a contracting company), phoning the company when it didn't work, waiting a few days for a fix to arrive and inevitably giving up in disgust and importing the data by hand using cut and paste. Once the numbers were imported, he would be able to produce reports, which again was a laborious manual process. Every month he was able to do the import and produce about four or five reports in the remaining two or three weeks.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">When I took over, I set about first fixing the bugs in the import program, and then rewriting it, using the built-in language which came with the database so I could put the floppies in and import the data straight into the database in a couple of hours with a single button press (It would have been faster but PCs were just very slow in those days). I gradually redesigned and normalised the database and made standard queries which answered all of my boss's usual reporting needs. Suddenly I could not only produce reports right from the beginning of the month, but I could produce more reports than my predecessor, with less work. All I did to produce a report was run a query, paste the results into a spreadsheet and apply the formatting. It would take about half an hour at the most to do a report. I could do more in a single day than my predecessor could in the entire month, so I used to get all my work done and then play a mindless first-person shoot-em-up game to fill my time.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now the incentive for me to fix the software and write new software to improve my productivity in this job was that I was lazy and wanted to avoid the tedious manual labour that my predecessor did. My employers benefited hugely from this: not only did I do much more work than they expected, but I eliminated the need for support calls to the consultants to fix the import program. My boss, however, was always a bit grumpy when he saw me playing the game, thinking than I should be doing something better with the company's time.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Conversely, I once worked with a developer who checked in a truly extraordinary amount of code. He worked long hours, got paid very little and was continually frustrated. Why? Because his employer was principally concerned with the outcome of the code and wasn't seeing a whole lot of results they liked.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Lots of employers, consciously or otherwise, adopt a policy of payment by effort. It's not uncommon in the software jobs for people to measure "productivity" simply by looking at the number of lines of code checked in to the source code revision control system. As can be seen from this example, however, this can be enormously counter-productive as it provides an incentive for activity, rather than achievement. This is a big problem with so-called "alternative economic systems" such as
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Parecon" title="Parecon article from wikipedia" target="_blank">parecon</a>. They simply reward the wrong things.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/pay_by_results" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/thoughts" target="_blank">thoughts</a>
</span>
Last updated: 2006-05-06T07:18:01Z</div>
</div>
<div title="I Ching" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ching" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">I Ching</a></h2>
<div style="text-align:left;font-style:italic;">About the hexagrams on this site</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">My interest in the I Ching began when I was a music student. Studing John Cage, I learned that he was heavily influenced by the I Ching and used hexagrams as an aid to composition of aleatoric music. I bought a copy of the Richard Wilhelm translation and learned to cast hexagrams via the coin oracle. I revived this interest when I studied Tai Chi Chuan.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Every visitor to the front page of this website is greeted by a pair of
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/I_ching" target="_blank">I-Ching</a>
hexagrams, which are generated by <a href="http://archive.today/o/uiYDs/www.uncarved.com/static/ching.py.txt" target="_blank">this</a>
small python program. The distribution of results in the I-Ching is not uniform, and this page gives the same distribution of lines as the <a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/I_Ching_divination%23Yarrow_stalks" target="_blank">Yarrow Stalk oracle</a>. The second hexagram is the first but with "moving lines" inverted in the traditional fashion. This website uses
<a href="http://archive.today/o/uiYDs/webpy.org/" target="_blank">web.py</a>, and I incorporate the I-Ching reading into the
<a href="http://archive.today/o/uiYDs/cheetahtemplate.org/" target="_blank">Cheetah</a>
template for the homepage. The relevant snippet of template code looks like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">            #import ching
            #set $hexes = $ching.get_hexagram_pair
            #set $hex1 = int($ching.get_hexagram_number($hexes[0]))
            #set $hex2 = int($ching.get_hexagram_number($hexes[1]))
            #set $name1 = $ching.get_hexagram_name($hexes[0])
            #set $name2 = $ching.get_hexagram_name($hexes[1])
            #echo '&#60;img id="hex1" alt="%d: %s" src="/static/images/iching/Iching-hexagram-%02d.png" /&#62;' % (hex1,name1 ,hex1) #
            #echo '&#60;img id="hex2" alt="%d: %s" src="/static/images/iching/Iching-hexagram-%02d.png" /&#62;' % (hex2,name2 ,hex2) #
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...and the lovely hexagram graphics are in the public domain. I downloaded them from the wikipedia.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/ching" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/everything%20else" target="_blank">everything else</a>
</span>
Last updated: 2006-05-01T12:29:27Z</div>
</div>
<div title="Shell Functions that are also executables" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/function_script" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Shell Functions that are also executables</a></h2>
<div style="text-align:left;font-style:italic;">Sometimes its handy to have shell functions that can be sourced, but can also be executables in their own right. Here's how.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Sometimes it's useful to have shell functions that can be used both from within my current shell and sourced inside scripts which I write. To achieve this is fairly easy if you arrange things according to a simple convention. What I do is to make a directory called "lib" in my homedir, and put each function into a seperate file in there that has the same name as the function.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">For example, I wrote a small function to print the name of the file in a given directory that has most recently been modified. To make this more generic, I got it to print the n-th from last, rather than specifically the last. So I make a small file called
<code style="font-size:85%;">~/lib/printlastfile</code>
containing the following:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;"># vim: set syn=zsh:

#if no args are supplied, print the last filename from $TMP
#if one arg, print the n-th from last filename from $TMP
#if two args, the second arg is the name of a dir to use instead of TMP
printlastfile()
{
    RANK=${1:-1}
    #expand $TMPDIR and append a trailing slash if it doesn't have one
    DIR=$( echo ${2:-${TMPDIR:-'/tmp/'}} | sed 's,[^/]$,&#38;/,' )

    ls -t "${DIR}"* | sed -n "${RANK}p;${RANK}q"
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So any time I want that function I can just source that file. Now say I want an executable that runs
<code style="font-size:85%;">printlastfile</code>. I could make
<code style="font-size:85%;">~/bin/printlastfile</code>
as follows:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">#!/bin/zsh
. ~/lib/printlastfile
printlastfile "${1}" "${2}"
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">... but that gets a bit tedious when you have a few of these things so I made one generic executable that for any function, will source the function and then run it. I call it
<code style="font-size:85%;">libsquiggle</code>
because it turns things which are in squiggle/lib into executables and it looks like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">#!/usr/bin/env zsh

MYNAME="${0:t}"
. "${HOME}/lib/${MYNAME}"

$MYNAME "$@"
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So I make an executable called
<code style="font-size:85%;">libsquiggle</code>
that looks like that and for any function in ~/lib that I want to work as an executable I make a symlink in ~/bin called the name of the function and pointing to <code style="font-size:85%;">~/bin/libsquiggle</code>. Thus:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">ls -l =printlastfile                                                                  
lrwxrwxrwx  1 sean sean 11 Oct  5  2005 /home/huntse/bin/printlastfile -&#62; libsquiggle
</code></pre>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/function_script" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-04-30T14:03:35Z</div>
</div>
<div title="Making other people rich " style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/making_other_people_rich" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Making other people rich
</a></h2>
<div style="text-align:left;font-style:italic;">A basic understanding of economics can help you to be a happier and more successful person</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I was travelling on the tube one day when as is sometimes the case, a guy came into the carriage with a cup of change and started telling everyone the story of his (hard) life and how he came to be homeless. He then passed the cup around for people to make donations. "Why", someone asked, "don't you sell the
<a href="http://archive.today/o/uiYDs/www.bigissue.com/bigissue.html" target="_blank">big issue</a>
instead of begging?" The response of the homeless guy was very interesting and vituperative. He ranted about how the founder of the big issue was now a millionaire and that he (homeless guy) "wasn't going to work to make anybody else rich". Now I have no idea whether the person who founded the big issue is a millionaire or not. I hope he is but it really doesn't matter for our purposes here. At the time my intution was that this attitude was at the heart of the problems that had led this unfortunate man to be in his current predicament, but I didn't at the time know enough about economics to realise why this was the case.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In a
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Free_market" target="_blank">free market</a>
all trades result in excess value for both participants or else they don't occur. Even in real everyday life it's easy to see by example why this is the case. Say for instance I want to sell one of the old computers I have cluttering up the place and never use. If you don't offer me enough I won't let you have the computer, and if I ask for too much then you won't be interested. "Enough" is "at least as much as I think the computer is worth to me" and "too much" is "more than you're willing to pay to own what is (let's face it) more than likely to be a redundant piece of junk". So the price we agree on has to be more than I think the computer is worth to me and less than you are willing to pay for it otherwise we won't make the deal because it's not worthwhile. We could define a fair trade as one in which the excess value on both sides of the deal was equal.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The Big Issue magazine is a magazine that campaigns on behalf of homeless people and it's business model is designed to help homeless people to improve their lot through their own efforts, not through charity. The way this works is that instead of selling through shops and newsstands, the magaine is sold to homeless people who then sell it on the streets and make a profit on each copy they sell. The idea is that they can then use the money they make to gradually raise themselves out of poverty. So the homeless person becomes a vendor: paying the company wholesale price and selling it at retail and making a small profit on each magazine sold. This profit is the excess value for the vendor. In return, the company is happy to sell at retail so that it doesn't need to worry about distribution.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now consider the person who founded the magazine and imagine for the sake of simplicity that he does everything concerned with running the magazine himself. He gets people to write pieces for the magazine, organises the printing and everything else that is necessary until he has a stack of magazines ready for distribution. He then sells bundles of magazines to vendors for them to sell on at a profit. It stands to reason that because he is doing a lot of transactions (with each one of a number of vendors) and each of these transactions is creating an excess of value for both sides, that along the way he will create a lot of value for himself as well as helping a lot of homeless people who become vendors of his magazine. By helping others in this way he can easily become very rich if he manages his business well
<em>even if every deal he does is completely fair</em>.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">It's fashionable in some circles to think that anyone who becomes rich does so by exploiting others. Sometimes this is the case. However, from an economic point of view, there is no reason that someone creating a lot of value for others may not also become rich along the way. In fact, many times, making other people richer is the best way to improve one's own lot in life. Certainly anyone who scrupulously avoids creating value for others is likely to end up with very little for themselves. Since he made me come to realise this, I now wish I had given that homeless guy on the tube more of my change.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/making_other_people_rich" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/thoughts" target="_blank">thoughts</a>
</span>
Last updated: 2006-04-23T08:38:07Z</div>
</div>
<div title="Building a better cd" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/better_cd" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Building a better cd</a></h2>
<div style="text-align:left;font-style:italic;">Unix shell is very flexible and easy to customise. Here is how I made "cd" better for me than the builtin one.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">One of the key strengths of unix systems is the philosophy of small tools which can be combined in flexible ways. Writing your own scripts, functions and aliases to customise your user experience not only makes your life better and more productive, its also a great way to learn about unix.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This is the antithesis of the mindset that brings about Integrated Development Environments. The great thing about the unix shell as an integrated environment is that it is infinite in potential given that you can always extend the facilities you have by making other tools using scripting or by getting them from the web. The shell itself is extensible in that you can add little scripts or write functions to add features or do things your way.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">For example, the cd builtin in ksh has this tremendous feature for dealing with long paths. Say I'm in /foo/bar/nerf/2003-04-26/conf/frazzle and I realise I need to be in /foo/baz/nerf/2003-04-26/conf/frazzle, all I do is type
<code style="font-size:85%;">cd bar baz</code>
. That's pretty useful.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I also often find myself typing
<code style="font-size:85%;">vi /the/path/to/a/file</code>, then wishing I could do
<code style="font-size:85%;">cd !$</code>
to get to the directory to check the file in or whatever. So I built a cd function that changes to the parent directory if the target is a file. When a colleague of mine explained the ksh cd behaviour, I added his ksh-like cd function to mine to get this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">cd()
{
    if [ -z "$1" ] ; then
        builtin cd
    else
        if [ -n "$2" ]; then
            TRY="${PWD/$1/$2}"
        else
            TRY="$1"
        fi

        if [ -f "${TRY}" ]; then
            builtin cd "${TRY:h}"
        else
            builtin cd "${TRY}"
        fi
    fi
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Notice that this includes a few zsh-isms which you'll need to change if you want to use this in bash.
<code style="font-size:85%;">${TRY:h}</code>
is the same as <code style="font-size:85%;">$( dirname "${TRY}" )</code>
but I get to skip the backticks and save a fork. I think you can do this in bash using a string substitution something like <code style="font-size:85%;">"${TRY##*/}"</code>
but I haven't bothered to try. If you are using a csh-like shell I pity you and this cd mechanism will not be enough to save you from your folly anyway.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/better_cd" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-04-21T15:44:45Z</div>
</div>
<div title="Making the switch" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/dvorak" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Making the switch</a></h2>
<div style="text-align:left;font-style:italic;">Changing over to dvorak typing is tough, but worth it</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Some time ago I decided to give the
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard" target="_blank">dvorak</a>
simplified keyboard layout a go. The major incentive for me to switch was that a colleague of mine introduced me to the brilliant <a href="http://archive.today/o/uiYDs/www.typematrix.com/" target="_blank">typematrix</a>
2030 keyboard with its innovative and striking "matrix" layout. It also features a hardware switch to configure the keyboard either as qwerty or dvorak. Even on unix-like operating systems where keyboard remapping is easy, this is a great feature because it means that even before login you can type dvorak.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In any case, the change was excruciatingly hard for the first few days as I have always been the sort of typist whose fingers roam erratically over the board and I was being forced to actually learn to stay on the home row. Nonetheless, as the typematrix folks say, if you stick at it and type nothing but dvorak for the first couple of weeks then it soon becomes very easy and switching back to qwerty if you need to use someone else's keyboard or whatever is not difficult at all after that.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I was a bit skeptical before, thinking that a lot of my typing was unix commands and program keywords and that as they are not normal english, the rearrangement of the letters may not be optimal for that use. That doesn't sem to be the case. Until I tried to switch over, I underestimated how much of daily typing was just english text (emails, program comments, documentation, notes to myself etc).
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In spite of being an inveterate vim user, I have not found the loss of the vi home row arrow keys (hjkl) particularly hard to bear. It seems that I never used them much anyway, mostly doing searches or word movements rather than line movements. When I do need a line movement, I am happy to use the arrow keys. Certain keystrokes in certain applications, however ("ZZ" in vi to save and quit, for instance) I have obviously learned completely kinesthetically and it took my brain a couple of weeks to stop typing those incorrectly by mistake.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I would recommend switching to dvorak to anybody who types a lot (programmers etc) and is prepared to really give themselves a couple of weeks to do it. Since I switched, four of my colleagues at work have done the same, and they were all up to speed in around the same time as me or less. It seems to especially help if you are a bit of an ad-hoc typist with qwerty, rather than a typing maestro. That way you give yourself the additional benefit of learning to type properly at the same time.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Getting a typematrix keyboard may help because the change in layout is a trigger for my brain to switch into dvorak mode and when I feel a conventional keyboard I naturally think qwerty. I switched briefly on a conventional keyboard too, but since I use the typematrix at work and at home, I didn't do enough dvorak on a staggered keyboard for it to really stick for me.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/dvorak" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-04-21T15:44:28Z</div>
</div>
<div title="Being Productive in Text Mode" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/text_mode" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Being Productive in Text Mode</a></h2>
<div style="text-align:left;font-style:italic;">If you use a Unix system well, the command line can be the ultimate IDE.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">People who I work with are often bemused by the perculiar setup I have on my machine, which is the product of constant evolution over the last five years or so. My setup is designed to work well for me, not to look pretty or provide distraction. As such, it can be thought of as sort of the opposite of desktop environments like
<a href="http://archive.today/o/uiYDs/www.gnome.org/" target="_blank">Gnome</a>. The other thing about my setup is that it is designed first and foremost to be fast and as such programs which are slow to start, slow to run or consume a lot of memory are completely out. For this reason, over the years I have ditched the emacs family of editors, fancy window managers and silly meta-environments like Gnome. People who use vim tend to look productive and slightly wired like
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/images/kopk.jpg" target="_blank">this</a>, whereas emacs users have been known to look like
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/images/saintignucius.jpg" target="_blank">this</a>. I think that proves my point nicely.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I also use a text-mode web browser where I can because it is quick to start up and makes it quick to find information. Time-wasting web browsing of sites entirely devoid of real information I still do with a graphical browser, however. I have found that as computers that I use have become faster and more powerful, my desire for speed has increased so I am even more obsessed with small, fast apps than I used to be.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The Goals of my setup are straightforward:</div>
<ul style="text-align:left;">
<li style="text-align:left;">Small memory footprint</li>
<li style="text-align:left;">Fast</li>
<li style="text-align:left;">Flexible</li>
<li style="text-align:left;">Productive</li>
<li style="text-align:left;">Maximise available resources (desktop area etc)</li>
</ul>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Apps I use</div>
<ul style="text-align:left;">
<li style="text-align:left;">Linux - Let's not kid ourselves. I'm much more productive in Linux than I am elsewhere.</li>
<li style="text-align:left;">The vim editor - As a programmer your editor is your most important tool and vim is by far and away the best there is (for me anyway).</li>
<li style="text-align:left;">The zsh shell - The zsh shell is a pretty productive environment for me, but the jury is still out on this for me. I don't mind bash either as long as I can use vi keybindings.</li>
<li style="text-align:left;">The
<a href="http://archive.today/o/uiYDs/www.nongnu.org/ratpoison/" style="text-align:left;" target="_blank">ratpoison</a>
window manager- The X window manager which allows you to do away with your mouse and means you are forever liberated from dragging and resizing and using the annoying mouse. </li>
<li style="text-align:left;">Gnu screen - I'm not going to put a link to the FSF website here so find it on google. Screen is cool though.</li>
<li style="text-align:left;">Scripting languages - noone is productive on unix without being able to write little scripts. As well as the shell, I love scripting in Perl, sed (sometimes) and Python.</li>
</ul>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/text_mode" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-04-21T15:04:39Z</div>
</div>
<div title="Patterns in Perl" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/perl_patterns" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Patterns in Perl</a></h2>
<div style="text-align:left;font-style:italic;">An article I wrote for the Perl Journal a long time ago</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...about how to use iterators and some other simple design patterns in perl. The idea of iterator chains is still interesting to me, although I prefer python to perl for most tasks these days.
<a href="http://archive.today/o/uiYDs/www.foo.be/docs/tpj/issues/vol5_2/tpj0502-0007.html" target="_blank">Here it is</a>
anyway...</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/perl_patterns" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2006-04-21T14:51:31Z</div>
</div>
<div title="helper classes for scala" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/helpers" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">helper classes for scala</a></h2>
<div style="text-align:left;font-style:italic;">My first opensource scala package</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So I've released my helpers code via
<a href="http://archive.today/o/uiYDs/uncarved.com/blog/helpers_github.mrk" target="_blank">github</a>. Scaladoc is available
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/scala/helpers/doc/index.html" target="_blank">here</a>, although I warn you that my patience with hacking the stylesheet only goes so far and I don't yet know how to make scaladoc that is not foul to look at. To build it, and run the tests, do...</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">mvn test
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...after unpacking the tarball somewhere</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The motivation behind this package is that I wanted to do some http stuff and wanted to make my client code be as simple as possible while still being polite to servers. So that meant supporting conditional get using Etags, Last-Modified and also supporting gzip encoding. I do all this by using the apache commons
<a href="http://archive.today/o/uiYDs/hc.apache.org/httpcomponents-client/index.html" target="_blank">httpclient-4.x</a>
and <a href="http://archive.today/o/uiYDs/hc.apache.org/httpcomponents-core/index.html" target="_blank">httpcore-4.x</a>
libraries and wrapping them all up in a class that's convenient and simple to use. Here's a taster:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;"> import com.uncarved.helpers.http._

 val helper = new BasicClient()
 //Get a webpage as a string (if you look at the apache http log4j messages you can see it
 //does conditional get and has transparent gzip support)
 val str = helper.get("http://www.theflautadors.org/")

 //Get some XML (with request parameters supplied)
 val params = List(("tag"-&#62;""), ("limit"-&#62;"5"))
 val xml = helper.getXML(Request(RequestType.GET, "http://www.uncarved.com/index.py/rss1.1.xml", params))
 val items = xml \\ "item"
</code></pre>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/helpers" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2011-06-01T10:46:47Z</div>
</div>
<div title="Log4j for Scala" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/LogHelper" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Log4j for Scala</a></h2>
<div style="text-align:left;font-style:italic;">Scala is nice. Logging is nice. Scala + logging.....?</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I've recently been playing about a bit with
<a href="http://archive.today/o/uiYDs/www.scala-lang.org/" title="Home of the Scala programming language" target="_blank">Scala</a>. It's a great language in which you can write real programs very easily. As an example, in Java you often want to be able to make use of
<a href="http://archive.today/o/uiYDs/logging.apache.org/log4j/" title="The Apache log4j logging system" target="_blank">log4j</a>
to log various tracing info. Well, here's a little helper trait you can mix in to scala classes make logging completely trivial:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">package com.uncarved.helpers

import org.apache.log4j.Logger;

/**
 * LogHelper is a trait you can mix in to provide easy log4j logging 
 * for your scala classes. 
 **/
trait LogHelper {
    val loggerName = this.getClass.getName
    lazy val logger = Logger.getLogger(loggerName)
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">You use it like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">class MyClass extends LogHelper {
    logger.debug("We got ourselves a class")
    def someMethod(temp: Int) = {
        logger.debug("entering someMethod")

        if(temp&#62;25) {
           logger.info("It's mighty hot in here")

           //...do something

        }
        //..... etc

        logger.debug("leaving someMethod")
    }
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Easy peasy logging. This class is one of several that I have released on
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/helpers_github.mrk" title="How to download and build this software from github" target="_blank">github</a>. Enjoy!</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/LogHelper" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2011-06-01T10:40:43Z</div>
</div>
<div title="Towards a more idiomatic FP pricer" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/more_idiomatic_ocaml" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Towards a more idiomatic FP pricer</a></h2>
<div style="text-align:left;font-style:italic;">Taking advice from a real expert, the pricer becomes more idiomatic</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">In my quest for a good ocaml book, I found and bought
<a href="http://archive.today/o/uiYDs/www.ffconsultancy.com/products/ocaml_for_scientists/index.html" target="_blank">this one</a>: "OCaml for Scientists" by Jon Harrop. I really can't recommend it too highly- it's an excellent book. Furthermore, Jon Harrop looked at this website and gave me some advice about making the code more idiomatic by using record types. He even wrote the first one for me to show how!</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The basic idea is that you don't need classes to encapsulate data (as I have been using them), you can just use bindings which become enclosed within functions in a record type. This is very nice indeed.</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** parameter for models *)
type param = {
    integral :       float -&#62; float -&#62; float;
    integral_sq :    float -&#62; float -&#62; float;
    mean :           float -&#62; float -&#62; float;
    rms :            float -&#62; float -&#62; float;
}
(** Constructor function that makes a parameter record given an
 integral and an integral_sq func *)
let make_param integral integral_sq =
    {
        integral=integral;
        integral_sq=integral_sq;
        mean=(fun t1 t2-&#62;(integral t1 t2) /. (t2 -. t1));
        rms=(fun t1 t2-&#62;(integral_sq t1 t2) /. (t2 -. t1));
    };;

(** build a constant parameter *)
let param_const x =
    let integral t1 t2 = (t2-.t1) *. x in
    let x_sq = x *. x in
    let integral_sq t1 t2 = (t2-.t1) *. x_sq in
make_param integral integral_sq;;


(** Parameter that models a linear function f(x) -&#62; ax + b *)
let param_linear a b =
    let integral t1 t2 =
      let integrate_to x = 0.5 *. x *. a *. x +. x *. b in
        integrate_to t2 -. integrate_to t1
    in
    let integral_sq t1 t2 =
        a ** 2. *. (t2 ** 3. -. t1 ** 3.) +.
        a *. b *. (t2 ** 2. -. t1 ** 2.) +.
        b ** 2. *. (t2 -. t1)
    in
    make_param integral integral_sq;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So our classes have become a simple record of four functions and some functions which return this type. Notice how make_param takes two functions and makes two more from them. The code is otherwise similar to the class-based examples, but is a little more straightforward. For piecewise parameters, we do the same sort of thing:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">(** For piecewise constants and piecewise linear functions a "piece" is a
  parameter that applies between low and high limits. *)
type piece = { low: float; high: float; p: param; };;

(** Make piecewise parameters.  Takes a list of pieces which each
  specify the limits and the linear or const parameter in each region.

  At present, does no checking that the pieces are continuous and not
  overlapping *)
let param_piecewise pieces =
  (* there's probably a better way of doing this, but anyway...
     Apply a function to each piece, with the parameters being the part of
     the interval from t1 to t2 that is inside the interval of the piece *)
  let visit_pieces pieces fn t1 t2 =
      let visit_piece piece low high =
        if (low &#62; t2 || high &#60; t1) then
          0.
        else
            let range_start = max t1 low in
            let range_end = min t2 high in
            (fn piece) range_start range_end in
      let rec visit_list so_far lis =
        match lis with
            [] -&#62; so_far (** we're done *)
          | {low=low; high=high; p=p} :: rest -&#62; visit_list (so_far +. (visit_piece p low high)) rest
      in
        visit_list 0. pieces
  in
  let integral t1 t2 = visit_pieces pieces (fun x-&#62;x.integral) t1 t2 in
  let integral_sq t1 t2 = visit_pieces pieces (fun x-&#62;x.integral_sq) t1 t2
  in
  make_param integral integral_sq;;

(** helper func to make parts of a piecewise const function *)
let make_const_piece low high x =
  assert (low&#60;high);
  {low=low; high=high; p=(param_const x)};;

(** helper func to make parts of a piecewise linear function *)
let make_linear_piece low high a b =
  assert (low&#60;high);
  {low=low; high=high; p=(param_linear a b)};;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This really is a great deal nicer than what we had before. Flushed by our success, we make a simple function to turn a list of x,y tuples into a piecewise constant function:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">let make_const_param_curve lis =
  let rec build_curve (so_far : piece list) x_old lis =
    match lis with
      [] -&#62; List.rev so_far
    | (x, y)::res when x&#62;x_old -&#62;
        let this_piece = make_const_piece x_old x y in
        build_curve (this_piece::so_far) x res
    | (x, y)::res -&#62; invalid_arg "make_const_param_curve: expects sorted x in list"
  in
    build_curve [] 0. lis;;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Now we can build a piecewise const function by doing:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">make_const_param_curve [ 0.1, 0.5; 0.5, 0.25; 1., 0.2 ];;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">It would be a simple matter to make a function that built a piecewise linear function up in the same manner.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/more_idiomatic_ocaml" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/reviews" target="_blank">reviews</a>
</span>
Last updated: 2009-10-18T19:58:33Z</div>
</div>
<div title="Foaf in n3" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/foaf" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Foaf in n3</a></h2>
<div style="text-align:left;font-style:italic;">Having got started with n3 I made myself a foaf file using it</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">So now I've
<a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/gtd_in_n3.mrk" title="Getting things done using n3" target="_blank">started</a>
with <a href="http://archive.today/o/uiYDs/www.w3.org/2000/10/swap/Primer.html" title="notation3 and semantic web primer" target="_blank">notation3</a>
I am itching for places to use it. For this reason I decided to make myself a <a href="http://archive.today/o/uiYDs/www.foaf-project.org/" title="All about FOAF" target="_blank">foaf</a>
file. Happily, this is really straightforward using n3. My foaf.n3 looks like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">@keywords a.
@prefix : &#60;http://xmlns.com/foaf/0.1/&#62;.
@prefix wot: &#60;http://xmlns.com/wot/0.1/&#62;.
@prefix dc: &#60;http://purl.org/dc/elements/1.1/&#62;.
@prefix x: &#60;#&#62;.

x:this a PersonalProfileDocument;
    wot:assurance "http://www.uncarved.com/static/foaf.rdf.asc";
    maker x:me;
    primaryTopic x:me;
    dc:title "Sean Hunter's FOAF file";
    dc:identifier "http://www.uncarved.com/static/foaf.rdf".


x:me a Person; 
    name "Sean Hunter"; 
    gender "male";
    title "Mr"; 
    givenname "Sean";
    family_name "Hunter";
    homepage &#60;http://www.uncarved.com/&#62;;
    mbox_sha1sum "f5a2eaad7e46af80de0bc48e6db72efebe382da0";
    plan """
---  ---
---  ---
---  ---             Darkening of the Light. In adversity       
--------             It furthers one to be persevering.
---  ---
--------""".
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...which when I do
<code style="font-size:85%;">python /usr/bin/cwm.py foaf.n3 --rdf &#62;| foaf.rdf</code>
generates a <a href="http://archive.today/o/uiYDs/www.uncarved.com/static/foaf.rdf" target="_blank">foaf.rdf</a>
file like this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">&#60;!-- Processed by Id: cwm.py,v 1.164 2004/10/28 17:41:59 timbl Exp --&#62;
&#60;!--     using base file:/home/sean/doc/n3/foaf.n3--&#62;


&#60;rdf:RDF xmlns="http://xmlns.com/foaf/0.1/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:wot="http://xmlns.com/wot/0.1/"&#62;

    &#60;Person rdf:about="#me"&#62;
    &#60;family_name&#62;Hunter&#60;/family_name&#62;
    &#60;gender&#62;male&#60;/gender&#62;
    &#60;givenname&#62;Sean&#60;/givenname&#62;
    &#60;homepage rdf:resource="http://www.uncarved.com/"/&#62;
    &#60;mbox_sha1sum&#62;f5a2eaad7e46af80de0bc48e6db72efebe382da0&#60;/mbox_sha1sum&#62;
    &#60;name&#62;Sean Hunter&#60;/name&#62;
    &#60;plan&#62;
---  ---
---  ---
---  ---             Darkening of the Light. In adversity       
--------             It furthers one to be persevering.
---  ---
--------&#60;/plan&#62;
    &#60;title&#62;Mr&#60;/title&#62;
    &#60;/Person&#62;

    &#60;PersonalProfileDocument rdf:about="#this"&#62;
    &#60;dc:identifier&#62;http://www.uncarved.com/static/foaf.rdf&#60;/dc:identifier&#62;
    &#60;dc:title&#62;Sean Hunter's FOAF file&#60;/dc:title&#62;
    &#60;maker rdf:resource="#me"/&#62;
    &#60;primaryTopic rdf:resource="#me"/&#62;
    &#60;wot:assurance&#62;http://www.uncarved.com/static/foaf.rdf.asc&#60;/wot:assurance&#62;
    &#60;/PersonalProfileDocument&#62;
&#60;/rdf:RDF&#62;
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">...which I link from my homepage. Easy-peasy. I can validate it using the w3c rdf
<a href="http://archive.today/o/uiYDs/www.w3.org/RDF/Validator/" target="_blank">validator</a>
and it works just fine. Now I just need to add some friends. If you know me and want to be added to my foaf file, mail me at <a href="mailto:sean@uncarved.com" target="_blank">sean@uncarved.com</a>.
</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Technorati tags:
<a href="http://archive.today/o/uiYDs/www.technorati.com/tags/foaf" target="_blank">foaf</a>
<a href="http://archive.today/o/uiYDs/www.technorati.com/tags/rdf" target="_blank">rdf</a>
<a href="http://archive.today/o/uiYDs/www.technorati.com/tag/semantic%20web" target="_blank">semantic web</a></div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/foaf" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-06-13T13:18:59Z</div>
</div>
<div title="Free Software" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/free_software" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Free Software</a></h2>
<div style="text-align:left;font-style:italic;">A Small Collection of Free Software I have written</div>
<ul style="text-align:left;">
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/static/slidentd/" style="text-align:left;" target="_blank">slidentd</a>
- the sly ident daemon</li>
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/static/slidentd/" style="text-align:left;" target="_blank">honest_identd</a>
- The slidentd package also includes this if you want a simple identd that gives up usernames</li>
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/static/aed/" style="text-align:left;" target="_blank">aed</a>
- The additional entropy daemon</li>
<li style="text-align:left;"><a href="ftp://ftp.uncarved.com/misc/sw-0.0.01.tar.gz" style="text-align:left;" target="_blank">sw</a>
- A tiny ssl wrapper (similar to stunnel). I use it to provide ssl-enabled services.</li>
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/static/misc/dnslogmunge.html" style="text-align:left;" target="_blank">dnslogmunge</a>
- A small perl script for decoding djbjdns logfiles</li>
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/static/misc/unaligned.c.html" style="text-align:left;" target="_blank">unaligned.c</a>
- A small wrapper for debugging unaligned traps on risc machines. Used by folks at compaq (when they produced Alphas) and some linux folks at IBM. In fact I gave IBM a slightly better version of this but I can't find it at the minute.</li>
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/ching.mrk" style="text-align:left;" target="_blank">ching.py</a>
- A small python module which can be used to generate hexagrams of the I Ching</li>
<li style="text-align:left;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/blog/helpers.mrk" style="text-align:left;" target="_blank">uncarved-helpers</a>
- A collection of scala classes, including a nice web client, a log4j thingymabobber and a memoization watchamacallit.</li>
</ul>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/free_software" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2009-06-12T16:25:08Z</div>
</div>
<div title="Productivity in unix" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/unix" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Productivity in unix</a></h2>
<div style="text-align:left;font-style:italic;">Loving the Unix user experience comes from realising how you make it work the way you want</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">People who I work with are often bemused by the perculiar setup I have on my machine, which is the product of constant evolution over the last five years or so. My setup is designed to work well for me, not to look pretty or provide distraction. As such, it can be thought of as sort of the opposite of desktop environments like Gnome. The other thing about my setup is that it is designed first and foremost to be fast and as such programs which are slow to start, slow to run or consume a lot of memory are completely out. For this reason, over the years I have ditched the emacs family of editors, fancy window managers and silly meta-environments like Gnome. People who use vim tend to look productive and slightly wired like this, whereas emacs users have been known to look like this. I think that proves my point nicely</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I also use a text-mode web browser where I can because it is quick to start up and makes it quick to find information. Time-wasting web browsing of sites entirely devoid of real information I still do with a graphical browser, however. I have found that as computers that I use have become faster and more powerful, my desire for speed has increased so I am even more obsessed with small, fast apps than I used to be. Goals of the setup</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">These are pretty simple:</div>
<ul style="text-align:left;">
<li style="text-align:left;">Small memory footprint</li>
<li style="text-align:left;">Fast</li>
<li style="text-align:left;">Flexible</li>
<li style="text-align:left;">Productive</li>
<li style="text-align:left;">Maximise available resources (desktop area etc)
</li>
</ul>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">Apps I use</h2>
<ul style="text-align:left;">
<li style="text-align:left;">The vim editor. As a programmer your editor is your most important tool and vim is by far and away the best there is. My vimrc file has developed over time, incorporating lots of stuff from others.</li>
<li style="text-align:left;">The zsh shell. The zsh shell is a pretty productive environment for me, but the jury is still out on this for me. I don't mind bash either as long as I can use vi keybindings.</li>
<li style="text-align:left;">Ratpoison - The X window manager which allows you to do away with your mouse and means you are forever liberated from dragging and resizing and using the annoying mouse. My ratpoisonrc might give some ideas.</li>
<li style="text-align:left;">Gnu screen - I'm not going to put a link to the FSF website here. Find it on google. Screen is cool though. You can copy my screenrc if you like.</li>
<li style="text-align:left;">Scripting languages - noone is productive on unix without being able to write little scripts. As well as the shell, I love scripting in Perl, sed and Python. We also have a great internal scripting language here at work which I love.
</li>
</ul>
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;">The shell and the unix philosophy</h2>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">One of the key strengths of unix systems is the philosophy of small tools which can be combined in flexible ways. This is the antithesis of the mindset that brings about Integrated Development Environments. The great thing about the unix shell as an integrated environment is that it is infinite in potential given that you can always extend the facilities you have by making other tools using scripting or by getting them from the web. The shell itself is extensible in that you can add little scripts or write functions to add features or do things your way.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">For example, the cd builtin in ksh has this tremendous feature for dealing with long paths. Say I'm in /foo/bar/nerf/2003-04-26/conf/frazzle and I realise I need to be in /foo/baz/nerf/2003-04-26/conf/frazzle, all I do is type
<code style="font-size:85%;">cd bar baz</code>
. That's pretty useful.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I also often find myself typing vi /the/path/to/a/file, then wishing I could do cd !$ to get to the directory to check the file in or whatever. So I built a cd function that changes to the parent directory if the target is a file. When a colleague of mine explained the ksh cd behaviour, I added his ksh-like cd function to mine to get this:</div>
<pre style="text-align:left;font-family:Menlo, consolas, 'Lucida Console', Courier, Fixed, monospace;margin-left:20px;"><code style="text-align:left;font-size:85%;">cd()
{
    if [ -z "$1" ] ; then
        builtin cd
    else
        if [ -n "$2" ]; then
            TRY="${PWD/$1/$2}"
        else
            TRY="$1"
        fi

        if [ -f "${TRY}" ]; then
            builtin cd "${TRY:h}"
        else
            builtin cd "${TRY}"
        fi
    fi
}
</code></pre>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Notice that this includes a few zsh-isms which you'll need to change if you want to use this in bash. ${TRY:h} is the same as $( dirname "${TRY}" ) but I get to skip the backticks and save a fork. I think you can do this in bash using a string substitution something like "${TRY##*/}". If you are using a csh-like shell I pity you and this cd mechanism will not be enough to save you from your folly anyway. Shell history completion and searching</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">One of the most basic ways to improve your productivity on unix systems is to become acquainted with your shell's history completion and search facilities. All of these described here are common to zsh and bash, although zsh has someadditional features that bash does not. Firstly, if you ever find yourself tapping the up arrow to scroll through your command history, you are living in a state of sin- either type history 100 or something to actually get a history list or use Ctrl-R to do a recursive incremental search through your shell history. Secondly, learn and use some basic history completions:</div>
<ul style="text-align:left;">
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!$</code>
completes to the last argument of your previous command. <code style="text-align:left;font-size:85%;">vi file</code>
followed by <code style="text-align:left;font-size:85%;">cvs ci !$</code>
edits a file and checks it in.</li>
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!*</code>
completes to all the arguments of your previous command. <code style="text-align:left;font-size:85%;">vi file1 file2 file{3,4,5}</code>
followed by <code style="text-align:left;font-size:85%;">cvs ci !*</code>
edits a list of files and checks then all in.</li>
<li style="text-align:left;"><code style="text-align:left;font-size:85%;">!!</code>
completes to the whole of your previous command, with args. <code style="text-align:left;font-size:85%;">vi /etc/passwd</code>
gives "permission denied? Use <code style="text-align:left;font-size:85%;">sudo !!</code>
to become rootly without retyping. </li>
</ul>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">There are lots more possible history completions but I use these three ten times for any one of them.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/unix" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/computers" target="_blank">computers</a>
</span>
Last updated: 2007-06-13T15:57:29Z</div>
</div>
<div title="Credits" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/credits" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Credits</a></h2>
<div style="text-align:left;font-style:italic;">People and stuff that have made this website fun to produce</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">This server is a co-located Linux box, and is brought to me (and you) courtesy of the excellent folks at
<a href="http://archive.today/o/uiYDs/www.mythic-beasts.com/" title="A great colo company who know what they're talking about" target="_blank">mythic-beasts.com</a>. Their service has been exemplary so far so I would recommend them if you want cheap tech-savvy colo or virtual serving. This server runs excellent free Linux server software such as
<a href="http://archive.today/o/uiYDs/cr.yp.to/djbdns.html" title="A dns system that's nothing like BIND" target="_blank">djbdns</a>,
<a href="http://archive.today/o/uiYDs/www.qmail.org/" title="small, fast, secure mail server" target="_blank">qmail</a>, and
<a href="http://archive.today/o/uiYDs/www.lighttpd.net/" title="small, fast web server" target="_blank">lighttpd</a>. Dynamic content is produced by a
<a href="http://archive.today/o/uiYDs/www.python.org/" title="great scripting language" target="_blank">python</a>
script I wrote using <a href="http://archive.today/o/uiYDs/webpy.org/" title="minimalist web framework in python" target="_blank">web.py</a>
. If I tidy the script up enough for general consumption I'll make it available.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The server also runs some free software of my own, such as
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/slidentd/" title="secure lightweight ident daemon" target="_blank">slidentd</a>. I have been told that if Britney Spears wanted an ident daemon, this is one of a long list she would ignore before just switching on the pidentd that came with her Linux distro. My pages are written using the
<a href="http://archive.today/o/uiYDs/www.vim.org/" title="my editor of choice" target="_blank">vim</a>
editor, and I use a <a href="http://archive.today/o/uiYDs/www.typematrix.com/" title="square keyboard" target="_blank">typematrix</a>
dvorak keyboard.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/credits" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/everything%20else" target="_blank">everything else</a>
</span>
Last updated: 2009-06-12T04:00:46Z</div>
</div>
<div title="Why Uncarved?" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/why_uncarved" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Why Uncarved?</a></h2>
<div style="text-align:left;font-style:italic;">The name of this website has a specific meaning that derives from Taoism</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">The Uncarved Block is a common English translation of a
<a href="http://archive.today/o/uiYDs/en.wikipedia.org/wiki/Taoism" title="Wikipedia article on Taoism" target="_blank">Taoist</a>
concept called "<a href="http://archive.today/o/uiYDs/plato.stanford.edu/entries/taoism/%23pu" title="simplicity" target="_blank">pu</a>". A block of wood that is not yet carved has no set form, it is thus infinite in potential and free from desire.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/why_uncarved" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/everything%20else" target="_blank">everything else</a>
</span>
Last updated: 2006-04-21T15:02:59Z</div>
</div>
<div title="A blatant plug" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/plug" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">A blatant plug</a></h2>
<div style="text-align:left;font-style:italic;">A concert worth attending (not that I have any personal interest. Oh no...)</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">On Thursday 7 June
<a href="http://archive.today/o/uiYDs/www.theflautadors.org/" title="The Flautadors Recorder Quartet" target="_blank">The Flautadors</a>
will be playing a concert at <a href="http://archive.today/o/uiYDs/www.wigmore-hall.org.uk/" title="Wigmore Hall, London" target="_blank">Wigmore Hall</a>, one of the best venues for chamber music in London. The concert is to launch their new CD of Baroque music by Purcell and Locke, and it should be a great. You can
<a href="http://archive.today/o/uiYDs/www.wigmore-hall.org.uk/concerts/concert_details.cfm?e=36243" title="Booking for The Flautadors Wigmore concert" target="_blank">book</a>
for the concert <a href="http://archive.today/o/uiYDs/www.wigmore-hall.org.uk/concerts/concert_details.cfm?e=36243" title="Booking for The Flautadors Wigmore concert" target="_blank">now</a>.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I have to declare an interest, because Catherine Fleming, one of members of The Flautadors, is my wife. I also host their mail and dns and translated their website from a table-based layout to xhtml and css.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/plug" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/thoughts" target="_blank">thoughts</a>
</span>
Last updated: 2007-06-13T16:02:47Z</div>
</div>
<div title="My Biog" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/biog" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">My Biog</a></h2>
<div style="text-align:left;font-style:italic;">Some stuff about me</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">I trained to postgraduate level as a Jazz bass player, but worked as a programmer to pay for my music postgrad and somehow ended up in a career in computer science. After various roles as a permanent employee and contractor I became the IT director of a dot com company. I recently left my job working for Goldman Sachs and am doing a number of interesting side projects and a bit of IT contracting. If you have a proposal to make to me feel free to email me at
<a href="mailto:sean@uncarved.com" target="_blank">sean@uncarved.com</a>.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">You can see
<a href="http://archive.today/o/uiYDs/www.linkedin.com/pub/sean-hunter/b/358/548" title="My profile on the professional networking site linkedin.com" target="_blank">my linkedin profile</a>, and invite me to your network if we know each other. There are quite a few Sean Hunters though so I might not be the one you're thinking of.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/biog" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/everything%20else" target="_blank">everything else</a>
</span>
Last updated: 2011-06-02T16:08:34Z</div>
</div>
<div title="Contact Me" style="text-align:left;">
<h2 style="text-align:left;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);padding-left:1em;font-size:1.1em;clear:none;"><a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/contact" style="text-align:left;clear:none;background-color: rgb(119, 119, 119); color:rgb(255, 255, 255);text-decoration:none;" target="_blank">Contact Me</a></h2>
<div style="text-align:left;font-style:italic;">Some people just really really want to know how they can get through to me. Sad but true.</div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">If you want to email me to tell me that my website sucks or any other thing, email me at
<a href="mailto:sean@uncarved.com" target="_blank">sean@uncarved.com</a>. If you want to, you can contact me in utmost privacy by using my
<a href="http://archive.today/o/uiYDs/www.uncarved.com/static/sean.gpg" title="Gnu Privacy Guard" target="_blank">gpg</a>
key. </div>
<div style="margin-top:16px;margin-bottom:16px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:12pt;margin-left:20px;text-align:justify;">Please note that I'm not interested in sharing links, hosting adverts, having my website optimised, having any of my body parts enlarged or the stack of money you just happen to have that needs someone trustworthy who'd be prepared to front some payments to help you steal it in return for some sort of kickback. Really, I'm not.</div>
<div style="margin-bottom:9px;font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;text-align:justify;clear:none;margin-left:1em;margin-top:2ex;font-size:0.6em;padding: 1ex 0px; ">
<a href="http://archive.today/o/uiYDs/www.uncarved.com/articles/contact" target="_blank">permalink</a>
<span>Tags:
<a href="http://archive.today/o/uiYDs/www.uncarved.com/tags/everything%20else" target="_blank">everything else</a>
</span>
Last updated: 2009-06-12T03:59:19Z</div>
</div>
</div>
<div style="font-family:Helvetica, avantgarde, Verdana, Arial, sans-serif;font-size:0.6em;padding-top:1.5ex;position:relative;text-align:left;top:1em;margin: 9px 0em 9px 1em; ">Unless otherwise specified the contents of this page are copyright © 2015
<a href="mailto:sean@uncarved.com" target="_blank">Sean Hunter</a>. This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International
<a href="http://archive.today/o/uiYDs/creativecommons.org/licenses/by-sa/4.0/" target="_blank">License</a>.
</div>
</div>
</div></div></div></body></html>